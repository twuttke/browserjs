// J+cCm3cNpMBxzH7znAnvlh16dQozHH7nt13DZmSqtRbnv5I5rnESrn1o1YcB8GW/G93B22cf/h/NVAc+2xezfytAMjYWuymKyUnIPukjANRr+vzm08lE7A6fYR/eZyyFrrksX/YkopdU5CV5uYrE7nH+1PDxlGJsMpzscoV+cLhc2kGPLCenkaVwSt7cX9LkWZ1Xk8G6C3HutLPXp54uUQ8U2fTlUpb7J9oDRlXgpih5bkMzszoHjRr0msbw4jXj0KEk6HwMQyuEzMmWFYROv0cMBxR0t2xZEvwN1+10toVMKJT6kA2pUtDSpHOq1lJ3V6GaiGca8Ia5HZtlhEbqmQ==
/**
** Copyright (C) 2000-2012 Opera Software ASA.  All rights reserved.
**
** This file is part of the Opera web browser.
**
** This script patches sites to work better with Opera
** For more information see http://www.opera.com/docs/browserjs/
**
** If you have comments on these patches (for example if you are the webmaster
** and want to inform us about a fixed site that no longer needs patching) please
** report issues through the bug tracking system
** https://bugs.opera.com/
**
** DO NOT EDIT THIS FILE! It will not be used by Opera if edited.
**/
// Generic fixes (mostly)
(function(opera){
	if(!opera || opera._browserjsran)return;
	opera._browserjsran=true;
	var bjsversion=' Opera Mobile 12.00 core 2.10.254, December 11, 2012. Active patches: 228 ';
	// variables and utility functions
	var navRestore = {}; // keep original navigator.* values
	var shouldRestore = false;
	var hostname = {
		value:location.hostname, 
		toString:function(){return this.value;},
		valueOf:function(){return this.value;}, 
		indexOf:function(str){return this.value.indexOf(str);},
		match: function(rx){ return this.value.match(rx); },
		contains:function(str){ return this.value.indexOf(str)>-1; },
		endsWith:function(str){ var pos=this.value.indexOf(str);return pos>-1 && this.value.length===pos+str.length; }
	}
	var href = location.href;
	var pathname=location.pathname;
	var fixed = false; // magic fixes need only run once
	if(!opera.postError)opera.postError=function(){}; // handling versions w/o error console
	// Storing function references
	var postError = opera.postError,
	call = Function.prototype.call,
	indexOf=String.prototype.indexOf,
	lastIndexOf=String.prototype.lastIndexOf,
	replace=String.prototype.replace,
	match=String.prototype.match,
	toLowerCase=String.prototype.toLowerCase,
	getAttribute=Element.prototype.getAttribute,
	setAttribute=Element.prototype.setAttribute,
	insertBefore=Node.prototype.insertBefore,
	insertAdjacentHTML=Element.prototype.insertAdjacentHTML,
	defineMagicVariable=opera.defineMagicVariable,
	defineMagicFunction=opera.defineMagicFunction,
	version=opera.version,
	getElementById=Document.prototype.getElementById,
	appendChild=Node.prototype.appendChild,
	removeChild=Node.prototype.removeChild,
	replaceChild=Node.prototype.replaceChild,
	evaluate=Document.prototype.evaluate,
	getElementsByTagName=Document.prototype.getElementsByTagName,
	createElement=Document.prototype.createElement,
	createEvent=Document.prototype.createEvent,
	dispatchEvent=Document.prototype.dispatchEvent,
	initEvent=Event.prototype.initEvent,
	createTextNode=Document.prototype.createTextNode,
	stopPropagation=Event.prototype.stopPropagation,
	preventDefault=Event.prototype.preventDefault,
	getComputedStyle=window.getComputedStyle,
	slice=Array.prototype.slice,
	shift=Array.prototype.shift,
	setTimeout=window.setTimeout,
	removeAttribute=Element.prototype.removeAttribute,
	addEventListener=Document.prototype.addEventListener,
	isNaN=window.isNaN,
	RegExp=window.RegExp,
	unescape=window.unescape,
	func_toString=Function.prototype.toString,
	parseFloat=window.parseFloat,
	random=Math.random;
	var opera_version = parseFloat.call(window,opera.version());
	var tinyMCEVersionInfo={};
	function log(str){if(self==top)postError.call(opera, 'Opera has modified the JavaScript on '+hostname+' ('+str+'). See browser.js for details');}

	// Utility functions

	function addCssToDocument(cssText, doc, mediaType){
		getElementsByTagName.call=addEventListener.call=createElement.call=createTextNode.call=insertBefore.call=setAttribute.call=appendChild.call=version.call=call;
		doc = doc||document;
		mediaType = mediaType||'';
		addCssToDocument.styleObj=addCssToDocument.styleObj||{};
		var styles = addCssToDocument.styleObj[mediaType];
		if(!styles){
			var head = getElementsByTagName.call(doc, "head")[0];
			if( !head ){
				var docEl = getElementsByTagName.call(doc, "html")[0];
				if(!docEl){
					// :S this shouldn't happen - see if document hasn't loaded
					addEventListener.call(doc, opera&&version.call(opera)>=9?'DOMContentLoaded':'load',
					function(){ addCssToDocument(cssText, doc); },false);
					return;
				}
				head = createElement.call(doc, "head");
				if(head) insertBefore.call(docEl, head,docEl.firstChild);
				else head = docEl;
			}
			addCssToDocument.styleObj[mediaType] = styles = createElement.call(doc, "style");
			setAttribute.call(styles, "type","text/css");
			if(mediaType)setAttribute.call(styles, "media", mediaType);
			appendChild.call(styles, createTextNode.call(doc,' '));
			appendChild.call(head, styles)
		}
		styles.firstChild.nodeValue += cssText+"\n";
		return true;
	}

	function addPreprocessHandler( search, replacement, onceonly, conditional ){
		// adding event handler for script pre-processing if required
		var handler=function(e){
			indexOf.call=replace.call=removeEventListener.call=call; /* also needs anything used inside conditional! */
			if( conditional && ! conditional(e.element) ){return;}
			e.element.text=replace.call( e.element.text, search, replacement );
			if(onceonly){
				removeEventListener.call(opera, 'BeforeScript', arguments.callee, false);
			}
		}
		opera.addEventListener('BeforeScript', handler , false);
		return handler;
	}

function avoidDocumentWriteAbuse(contentRegexp){
	var dw=document.write;
	contentRegexp = contentRegexp || /(^<img .*?width=("|)1("|)\s+height=("|)1("|)\s+border=("|)0("|)\s+alt="".*?>$|^\[object Object\]$)/i;
	document.write=function( s ){
		if( String(s).match( contentRegexp ) ){
			log('The s_code patch prevented document.write()');
		}else{
			dw.apply(document, arguments);
		}
	};
}
function fixGawkerMobile() {
	addCssToDocument('.non_webkit #comments, .non_webkit #comment_controls { display: block !important; }'
		+'#i_home .icon.icon29{background-position:0 -120px}'
		+'#i_home .selected .icon.icon29{background-position:-29px -120px}'
		+'#i_popular .icon.icon29{background-position:0 -149px}'
		+'#i_popular .selected .icon.icon29{background-position:-29px -149px}'
		+'#i_search .icon.icon29{background-position:0 -178px}'
		+'#i_search .selected .icon.icon29{background-position:-29px -178px}'
		+'#i_account .icon.icon29{background-position:0 -207px}'
		+'#i_account .selected .icon.icon29{background-position:-29px -207px}'
		+'#nav_home .icon.icon29{background-position:0 -120px}'
		+'#nav_home .selected .icon.icon29{background-position:-29px -120px}'
		+'#nav_top .icon.icon29{background-position:0 -265px}'
		+'#nav_top .selected .icon.icon29{background-position:-29px -265px}'
		+'.icon {background-size: 62px 370px !important;}'
	);
}
function forceMobileView(){
if( document.documentElement ){
	var meta=document.documentElement.appendChild(document.createElement('meta'));
	meta.setAttribute('name', "viewport");
	meta.setAttribute('content', "width=device-width,user-scalable=no");
}}

function forceWordWrapping(wrapTargets) {
    var wrapElements = wrapTargets||'div, span, p, li, a, td, th';
    opera.postError('Warning: Browser has forced word wrapping for certain elements.');
    addCssToDocument(wrapElements + '{ white-space: -o-pre-wrap !important; }')
}
function prepareFakeDesignMode(){
	document.addEventListener('load', function(e){
		try{
		if( e.target.tagName == 'IFRAME' ){
			// avoid security policy problems when document.domain is set
			if(hostname!=document.domain){
				var crossDomainPolicyBug=false;
				try{
					e.target.contentDocument.body;
				}catch(e){
					crossDomainPolicyBug=true;
				}
			    if(e.target.src=='' && crossDomainPolicyBug){
				e.target.src='data:text/html,"<script>document.domain=\''+document.domain+'\';</script>"';
			    }
			}
			if( e.target.contentDocument.designMode=='on' ){
				fakeDesignMode(e.target.contentDocument);
			}
			e.target.contentDocument.__defineSetter__('designMode', function(v){
				if(/on/i.test(v)){
					fakeDesignMode(this);
				}
			});
		}
		}catch(e){ opera.postError(e); }
		function fakeDesignMode(doc){
			var txt=doc.body.appendChild(doc.createElement('textarea'));
			txt.setAttribute('style', 'width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0')
			doc.body.style.overflow='hidden';
			txt.value=doc.body.innerText;
			doc.execCommand=function(){};
			doc.body.__defineGetter__('innerHTML', function(){ return txt.value.replace(/\n/g, '<br>\n'); });
			doc.body.__defineSetter__('innerHTML', function(v){ txt.value=v.replace(/<[^<]+>/g, ' ').replace( / {2,}/,' ' ); });
			doc.documentElement.__defineGetter__('innerHTML', function(){ return txt.value.replace(/\n/g, '<br>\n'); });
			doc.documentElement.__defineSetter__('innerHTML', function(v){ txt.value=v.replace(/<[^<]+>/g, ' ').replace( / {2,}/,' ' ); });
			doc.body.__defineGetter__('innerText', function(){ return txt.value; });
			doc.body.__defineGetter__('textContent', function(){ return txt.value; });
			doc.open=doc.defaultView.focus=function(){txt.focus();};
			doc.write=function(){
				txt.value=arguments.join('').replace(/<style.*\/style>/ig, '').replace(/<[^>]*>/g, ' ').replace(/&quot;/g, '"').replace(/\s{1,}/g, ' ');
			};
		}
	}, true);
}
function scaleImagesToScreenWidth(maxWidth) {
    var max = maxWidth || screen.width;
    addCssToDocument('img { max-width: ' + max + 'px !important; height: auto !important; }');
    opera.postError('Warning: Image resized to screen width by browser. See browser.js for details.');
}
function stopKeypressIfDownCancelled(stopKey){
	opera.addEventListener('AfterEventListener.keydown', function(e){
		if(e.eventCancelled)stopKey=true;
	}, false);

	opera.addEventListener('BeforeEvent.keypress', function(e){
		if(stopKey){
			preventDefault.call=call;
			preventDefault.call(e.event);
			stopKey=false;
		}
	}, false);
}







	// 272007, Prototype requires function.toString to return a unique string per function
// PATCH-621, Work around browser sniffing in old Macromedia menu script
// ANDMO-1210, Replace Youtube embeds with image and link on Android devices with no plugins.
// PATCH-16, Generic prepareFakeDesignMode
// 347496, Compatibility layer for Google Gears initialization script
// EMO-5081, Handle s_code stats script not named s_code - prevent them overwriting documents
// PATCH-138, Asia-region Generic Patches
// 0, Generic patches (Windows mobile)
// PATCH-372, Work around Facebook's attachEvent usage in all.js
// PATCH-4, Make sure plugin sniffers detect the correct Flash API version
// PATCH-369, Generic key event patch for better spatnav

	var funcCount=0;
	if((function(){}).toString().indexOf('ecmascript code')!=-1)Function.prototype.toString=function(){
		if(!this.functionNumber){
			this.functionNumber = funcCount;
			funcCount++;
		}
		return 'function func'+this.functionNumber+'(){[ecmascript code]}';
	}

	opera.defineMagicFunction('mmLoadMenus', function(func, context){
	  window.__defineSetter__('mmIsOpera', function(){});
	  window.__defineGetter__('mmIsOpera', function(){return false});
	  return func.apply(context, Array.prototype.slice.call(arguments, 2));
	});
	

	document.addEventListener("DOMContentLoaded", function (e) {
		if( navigator.platform == "Android" && !navigator.plugins.length ){
			var nodes = document.selectNodes('//object[starts-with(@data,"http://www.youtube.com/v/")] | //object//param[starts-with(@name,"src") and starts-with(@value,"http://www.youtube.com/v/")] | //embed[starts-with(@src,"http://www.youtube.com/v/")]');	
			for ( var i = nodes.length-1; i >= 0 ; i-- ) {	
				var id;
				var element = nodes[i];
				var uri = document.createElement('a');
				uri.href = (element.src) ? element.src : (element.data) ? element.data : (element.value) ? element.value : "";
				id = (uri.pathname.match(/embed\//)) ?  uri.pathname.split(/embed\//)[1] : uri.pathname.split(/v\//)[1];		
				id = id.split(/&/)[0];
				var VidUrl = document.createElement('a');
				VidUrl.href = "vnd.youtube:" + id;
				var ThumbImage= document.createElement('img');
				ThumbImage.src = "http://img.youtube.com/vi/"+id+"/1.jpg";
				ThumbImage.width = (element.width) ? element.width : element.parentNode.width;
				ThumbImage.height = (element.height) ? element.height : element.parentNode.height;	
				VidUrl.appendChild(ThumbImage);
				element.parentNode.replaceChild(VidUrl, element);
			}
		 }
	}, false);

	if(location.protocol=='https:'||location.protocol=='http:')prepareFakeDesignMode()

	if (window.opera && opera.createWorkerPool && 
	    navigator.mimeTypes["application/x-googlegears"] &&
	    navigator.mimeTypes["application/x-googlegears"].enabledPlugin
	    ){
		window.GearsFactory = function()
		{
		    var element = document.createElement("object");
		    element.setAttribute('style', 'display:block;width:1px;height:1px;position:absolute;left:-2px');
		    element.type = "application/x-googlegears";
	 
		    document.documentElement.insertBefore(element,
							  document.documentElement.firstChild);
		    element.getBuildInfo(); // to make sure init is complete
		    return element;
		}
	}

	opera.defineMagicVariable('s_account', null, function(obj){ avoidDocumentWriteAbuse(); return obj; });

	opera.addEventListener('BeforeExternalScript',function(ev){
		var name=ev.element.src; 
		if(!name){return;}
		if(name.indexOf('api.e-map.ne.jp/jsapi.cgi?')!=-1){
			log('PATCH-115, Zenrin Datacom E-Map API fix applied');
			if (!Event.prototype.__lookupGetter__('layerX')&&!Event.prototype.__lookupGetter__('layerY')) {
				Event.prototype.__defineGetter__('layerX',function(){ return this.offsetX; });
				Event.prototype.__defineGetter__('layerY',function(){ return this.offsetY; });
			}
			ev.element.src += '&force=1';
		}else if((name.indexOf('expapi/authentication')!=-1)||(name.indexOf('expapi/expmapinclude')!=-1)||(name.indexOf('rosen/authentication')!=-1)){
			log('PATCH-122, Rosenzu ASP Map Service map fix applied');
			opera.defineMagicFunction('_ch',function(){return true;});
		}else if((name.indexOf('expapi/suggest')!=-1)||(name.indexOf('rosen/suggest')!=-1)){
			log('PATCH-122, Rosenzu ASP Map Service suggestions fix applied');
			opera.defineMagicFunction('checkBrowser',function(){return true;});
		}else if(name.indexOf('http://ebook.webcatalog.jp/engine/java/7net/common/sCommonLib.js')!=-1){ 
			log('PATCH-125, Netfly TrueEBook fix applied');
			opera.defineMagicFunction('funcGetBrowser',function(){return 2;}); 
		}else if(name.indexOf('_zap/')!=-1 && name.indexOf('source/js/script.js')!=-1){ 
			log('PATCH-471, ZAPPALLAS Fortune _zap fix applied');
			opera.defineMagicFunction('checkNavigator',function(){return true;}); 
		}
	},false);

	// Use an event listener to detect specific scripts
	opera.addEventListener( 'BeforeExternalScript', function(ev){
		match.call=replace.call=indexOf.call=toLowerCase.call=postError.call=addEventListener.call=removeEventListener.call=version.call=parseFloat.call=call;
		var name=ev.element.src; 
		if( !name ){ return; } // no fixes required for SCRIPT xlink:href so far..
		name=toLowerCase.call(name );// toLowerCase fixes sangjatten.se
		if(indexOf.call(name,'s_code')>-1||indexOf.call(name,'omniture')>-1){//PATCH-59
			avoidDocumentWriteAbuse();
		}if(indexOf.call(name, 'zshare.net/videoplayer/js/PlayerFunctions.js')>-1){ // SOKRI4-1002
			opera.defineMagicFunction( 'hide_ad', function( rf, rt ){
				if( document.player )document.player.style.visibility='visible';
				return rf.apply(rt, slice.call(arguments, 2)) }
			);
			opera.defineMagicFunction( 'show_ad', function( rf, rt ){
				if( document.player )document.player.style.visibility='hidden';
				return rf.apply(rt, slice.call(arguments, 2)) }
			);
		}
	}, false);

	opera.addEventListener( 'BeforeExternalScript', function(ev){
		indexOf.call=addEventListener.call=removeEventListener.call=call;
		
		var name=ev.element.src;
		if(indexOf.call(name,'connect.facebook.net')>-1 && indexOf.call(name,'all.js')>-1){ //PATCH-372, PATCH-386
			var win_attachEvent=window.attachEvent;
			document.attachEvent=undefined; //PATCH-576
			var ifrScrollingSetter = (document.createElement('iframe')).__lookupSetter__('scrolling');
			var ifrScrollingGetter = (document.createElement('iframe')).__lookupGetter__('scrolling');
			HTMLIFrameElement.prototype.__defineSetter__('scrolling', function(){ if(this.src=='')this.src='javascript:void(0);'; return ifrScrollingSetter.apply(this,arguments); });
			HTMLIFrameElement.prototype.__defineGetter__('scrolling', function(){ return ifrScrollingGetter.apply(this,arguments); });
	
			if( window.fbAsyncInit && !window.fbAsyncInit._patched ){
				var origFBAsyncInit=window.fbAsyncInit;
				window.fbAsyncInit=function(){
					window.attachEvent=undefined;
					origFBAsyncInit.call(null);
					window.attachEvent=win_attachEvent;
				}
				window.fbAsyncInit._patched=true;
			}else{
				window.attachEvent=undefined; 
				addEventListener.call(opera, 'AfterScript', function(e){
					if( window.FB && FB.init && ! FB.init._patched ){
						(function(init){
							FB.init=function(){
								window.attachEvent=undefined;
								init.apply(this,arguments);
								window.attachEvent=win_attachEvent;
							}
						})(FB.init);
						FB.init._patched=true;
					}
					window.attachEvent=win_attachEvent;
					removeEventListener.call(opera, 'AfterScript', arguments.callee, false);
				}, false);
			}
		}
	
	},false);

	if( opera.flashPluginAX && opera.flashPluginAX() && Object.prototype.__defineGetter__ ){
		var origPluginGetter = navigator.__lookupGetter__('plugins');
		navigator.__defineGetter__('plugins', function(){
			try{
				new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');
				return undefined;
			}catch(e){
				return origPluginGetter.call(this);
			}
		});
	};

	stopKeypressIfDownCancelled();
	


	if((hostname.indexOf('dmm.co.jp')>-1)||(hostname.indexOf('dmm.com')>-1)){
		var cssText = '';
		cssText += '.grd-red {background:-o-linear-gradient(top,#F33,#D00);}';
		cssText += '.grd-gre {background:-o-linear-gradient(top,#9E2,#7B0);}';
		cssText += '.grd-tbl, .btn-size-play {background:-o-linear-gradient(top,#1DF,#09C);}';
		cssText += '.play-btn, .work-btn {background-size: 20px 20px!important;}';
		addCssToDocument(cssText);
		log('PATCH-1053, dmm.co.jp - add missing gradients and icon fix');
	} else if((hostname.indexOf('mobile.gnavi.co.jp')>-1)||(hostname.indexOf('my.gnavi.co.jp')>-1)){
		var cssText ='';
		cssText +='.gnaviKeywordSearchWrap,#scBtn .group01 {box-sizing:border-box;}';
		cssText +='input[type="submit"],#topAppMd p.btn,.btnFacebook, .btnBlue {background:-o-linear-gradient(top,#888,#333);}';
		cssText +='#gnIdentity .gnIdentityLoginButton,.gnListBg {background:-o-linear-gradient(top,#FE7,#FD2);}';
		cssText +='#submit .btn, #comfirmBtn .btn, #memberTouroku .btn {background-image:-o-linear-gradient(top,#333,#000);}';
		cssText +='.mapBtn a {background-color:#AAA;}';
		cssText +='.subarea .toggle_btn a {background-size:15px 15px!important;}';
		addCssToDocument(cssText);
		log('PATCH-1027, mobile.gnavi.co.jp,my.gnavi.co.jp - add missing gradients and layout fix');
	} else if((hostname.indexOf('tokyo.jp')>-1)||(hostname.indexOf('lg.jp')>-1)){
		if (location.pathname.indexOf('citymap')>-1) {
			window.opera.defineMagicFunction('chkBrowser',function(){
				return true;
			},false);
		}
		log('PATCH-186, tokyo.jp, lg.jp enable maps');
	} else if(hostname.endsWith('allbankonline.in')){
		HTMLElement.prototype.onselectstart = true;
		log('PATCH-889, allbankonline.in: prevent mousedown prevention');
	} else if(hostname.endsWith('b.mig33.com')){
		if(location.pathname.indexOf('wap')>-1)
		{
		    if(location.pathname.indexOf('home')>-1)
		    {
			    addCssToDocument('.floatleft {width:20% !important;}');
		            addCssToDocument('.floatright {width:80%; overflow:hidden !important;}');
		    }
		}
		
		log('PNGLAI-864, overlap issue of migAlerts');
	} else if(hostname.endsWith('bbc.co.uk')){
		addCssToDocument(" #disclaimer { bottom: 6px !important; white-space:nowrap; } ");
	
		if(pathname.match( /^\/mobile\// )){
		 forceMobileView();
		}
		log('YUSHAN-226, Fix page footer text overlap issue for bbc.co.uk\nTWEETY-118, Mobile BBC should default to mobile view');
	} else if(hostname.endsWith('cooliris.com')){
		document.addEventListener('DOMContentLoaded',
			function(){
				var elm = document.querySelector('meta[name="viewport"]');
				if(elm)elm.content = elm.content.replace(/user-scalable=no/,'user-scalable=yes');
			}
		,false);
		log('PATCH-781, cooliris: user-scalable yes');
	} else if(hostname.endsWith('facebook.com')){
		/* Facebook */
	
	
		if(hostname.endsWith('facebook.com')){
			var cssText = '.jewel .flyout:after { content: none !important; border: 0 !important; }';
			addCssToDocument(cssText);
		
			// Friend Requests / Messages / Notifications
			 var  cssText = '.jewel .flyout { border-width: 49px 28px 29px 28px; padding: 0px !important; -o-border-image: url(data:image/png;base64,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) 50 stretch; }';
			
			cssText += '.jewel .flyout .header { top: -30px !important; }';
			cssText += '.jewel .flyout .header .button { right: -12px !important; }';
			// Sort
			cssText += '.actionSheet .flyout.feedChooser .flyoutItem:nth-child(1) { border-top: none !important; }';
			cssText += '.actionSheet .feedChooser .flyoutItem.checked .indicator { margin-right: 22px !important; }';
			cssText += '.actionSheet .flyout .inner { -o-border-image: url(data:image/png;base64,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) 25 stretch; }';
			
			addCssToDocument(cssText);
			
		
			// Top Bar
			var cssText = '.chromeBar.acb { background-image: -o-linear-gradient(top, #738ABA, #2C4987); }';
			cssText += '.touch .btnC, .touch .btnI.bgb { background: -o-linear-gradient(top, #647AAB, #2C467E) !important; }';
			cssText += '.touch .btnD, .touch .btnI{ background: -o-linear-gradient(top, #FDFEFE, #F0F1F2) !important; }';
			// Profile Buttons
			cssText += '.touch .btnD.bglb, .touch .btnI.bglb { background: -o-linear-gradient(top, #FAFBFE, #E0E3EA); }';
			cssText += '.touch .btnBar.btnBarLinked .btnD.active, .touch .btnBar.btnBarLinked .btnI.active { background: -o-linear-gradient(top, #8B92A3, #AAB0C6) !important; }';
			// Search Bar
			cssText += '.touch .mSearchOverlay .mSearchArea { background: -o-linear-gradient(top, #434B5B, #242B39); }';
			cssText += '.touch .btnI.bgdb { background: -o-linear-gradient(top, #3B4456, #242A3A); }';
			// Swiped Button
			cssText += '.touch .btnN { background-image: -o-linear-gradient(top, #DF4451, #B91D2E); }';
			cssText += '.swipedBtnContext { transform: translate(320px,0); -o-transform: translate(320px,0); }'; 
			cssText += '.swipedBtnContext .btn { transform: translate(-320px,0); -o-transform: translate(-320px,0); }'; 
			cssText += '.swiped .swipedBtnContext { transform: translate(0); -o-transform: translate(0); }'; 
			cssText += '.swiped .swipedBtnContext .btn { transform: translate(0); -o-transform: translate(0); }';
			
			// Log In
			cssText += '.touch .textInputArea .input.inputWrapper { display: flex; }';
			// Search
			cssText += '.touch .mSideSearch .input.inputWrapper { display: flex; }';
			// Avatars
			cssText += '.touch .ib { display: flex; }';
			cssText += '.touch .ib a.darkTouch, .touch .ib span.l { float: left; margin-bottom: 10px; }';
			cssText += '.touch .ib .pic { float: left; }';
			//Pages you may like
			cssText += '.touch .storyAggregation.ego .egoAttachment, .touch .egoAttachment .primarywrap{display:flex;flex:1}';
			cssText += '.touch .egoAttachment > .right{display:flex;align-items:center}';
			//like-comment-share
			cssText += '.feedbackInlineWrap.inlineShare .ufiActions {display: flex;}';
			addCssToDocument(cssText);
			
			log('PATCH-618, touch.facebook.com - Fix unclickable dropdowns\nPATCH-618, touch.facebook.com - Add missing background images\nPATCH-618, touch.facebook.com - Missing opera prefixes/syntax');
		}
		log('0, Facebook');
	} else if(hostname.endsWith('goo.ne.jp')){
		/* goo.ne.jp */
	
	
		if((hostname.indexOf('search.goo.')>-1)||(hostname.indexOf('bsearch.goo.')>-1)){
			var cssText ='#tab {background:-o-linear-gradient(top,#555,#222);}';
			cssText +='.others .other_category .other_cell_time a {background-color:#DDD}';
			cssText +='.others .other_category .other_cell_time a.crt {background:-o-linear-gradient(top,#DDD,#BBB);}';
			cssText +='.morebtn {background:-o-linear-gradient(top,#8CF,#37D);}';
			addCssToDocument(cssText);
			log('PATCH-991, search.goo.ne.jp - add missing gradients');
		}
		if(hostname.indexOf('.goo.')>-1){
			var cssText ='input[type="text"] {box-sizing:border-box;}';
			cssText +='a.brc {background-image:-o-linear-gradient(top,#9FF,#09F);}';
			addCssToDocument(cssText);
			log('PATCH-987, goo.ne.jp - generic patch');
		}
		if(hostname.indexOf('dictionary.goo.')>-1){
			var cssText = '.dicResultTitle {background:-o-linear-gradient(top,#61A6F1,#3D74B5);}';
			cssText +='.dicResultList li {background: url(/img/smp/arrow.png) right center no-repeat, -o-linear-gradient(top, #C5E2F7,#F0F8FE);}';
			cssText +='#header {width:98%;}';
			cssText +='#header img, #header input, #footer img, #footer input {vertical-align:bottom;}';
			addCssToDocument(cssText);
			log('PATCH-983, dictionary.goo.ne.jp - add missing gradients and layout fix');
		}
		if(hostname.indexOf('ranking.goo.')>-1){
			var cssText = '#main-contents .main_area .nav ul li {background-color:#EEE;}';
			cssText += 'h1.bk_or, .bk_or a {background:-o-linear-gradient(top,#FA2,#F80);}';
			cssText +='h1.bk_ye, .bk_ye a {background:-o-linear-gradient(top,#FC4,#FB1);}';
			cssText +='h1.bk_gn, .bk_gn a {background:-o-linear-gradient(top,#8D3,#6B2);}';
			cssText +='h1.bk_bu {background:-o-linear-gradient(top,#3BF,#2AD);}';
			cssText +='.genre ul > li a {background:-o-linear-gradient(top,#FFF,#EEE);}';
			cssText +='.main_area .btnarea .nextbtn {background:-o-linear-gradient(top,#FC4,#FB1);}';
			addCssToDocument(cssText);
			log('PATCH-984, ranking.goo.ne.jp - add missing gradients');
		}
		log('0, goo.ne.jp');
	} else if(hostname.endsWith('insubuy.com')){
		HTMLElement.prototype.onselectstart = true;
		log('PATCH-703, insubuy.com: don\'t prevent mouse click');
	} else if(hostname.endsWith('livedoor.com')||hostname.endsWith('livedoor.jp')||hostname.endsWith('livedoor.biz')){
		/* livedoor */
	
	
		if(hostname.indexOf('.livedoor.')>-1){
			/* slider */
			CSSStyleDeclaration.prototype.__defineSetter__('webkitTransform', function(o){this.OTransform=o});
			CSSStyleDeclaration.prototype.__defineSetter__('webkitTransitionDuration', function(o){this.OTransitionDuration=o});
			addCssToDocument('#applist h1, #servicelist h1, #medialist h1, #setuplist h1, #timelinelist h1 {background:-o-linear-gradient(top,#BCD,#78A);} #servicelist .close ul li a {background:-o-linear-gradient(top,#8AE,#36D);}')
			/* blog generic */
			addCssToDocument('.footer-search-form span.footer-search-submit input {background:-o-linear-gradient(top,#888,#666);}');
			log('PATCH-1033, livedoor.com generic issues - Add support for lower case prefixed CSS ');
		}
		if(hostname.indexOf('blog.livedoor.')>-1){
			var cssText = '.cmnTtl01 {background: -o-linear-gradient(top,#6CF,#5BF);}';
			cssText +='.moreLnk01 a,#globalFooter #footerLogin a {background: -o-linear-gradient(top,#FFF,#EEE);}';
			cssText +='.cmnTab01 a.active {background: -o-linear-gradient(top,#BBB,#EEE);}';
			addCssToDocument(cssText);
			log('PATCH-1044, blog.livedoor.com - add missing gradients');
		}
		if(hostname.indexOf('news.livedoor.')>-1){
			var cssText ='#site-header {background:-o-linear-gradient(top,#D44,#911);}';
			cssText +='.topics-block-nav li a,.article-list li.more a,div.topics-block-list ul.more-list li a,.border-button-list li,.categoryAd ul li a,p.button a, div.more a,#navigation-sub li a {background:-o-linear-gradient(top,#FFF,#DDD);}';
			cssText +='.topics-list-pager li:first-child span, .topics-list-pager li:first-child a {background-size: 39px 30px;}';
			addCssToDocument(cssText);
			log('PATCH-1041, news.livedoor.com - add missing gradients and icon fix');
		}
		if(hostname.indexOf('profile.livedoor.')>-1){
			var cssText = '#site-header h1 a.profile {background-size: 167px 25px;}';
			cssText +='#site-header {background:-o-linear-gradient(top,#666,#333);}';
			cssText +='.join {background:-o-linear-gradient(top,#F34,#B23);}';
			cssText +='.login {background:-o-linear-gradient(top,#999,#666);}';
			cssText +='.gGradation {background:-o-linear-gradient(top,#CCC,#888);}';
			cssText +='#profSetting h2,#itemSetting h2,#designSetting h2 {background:-o-linear-gradient(top,#F22,#A00);}';
			addCssToDocument(cssText);
			log('PATCH-1043, profile.livedoor.com - add missing gradient and icon fix');
		}
		if(hostname.indexOf('rentalbbs.livedoor.')>-1){
			var cssText ='.bbsSearch input[type="submit"] {background:-o-linear-gradient(top,#F9B,#F6B);}';
			cssText +='.list li {background:-o-linear-gradient(top,#EEE,#FFF);}';
			cssText +='.headBtn a {background: url(/img/lite/arrow_btn.png) no-repeat 6px center,-o-linear-gradient(top,#777,#333);}';
			addCssToDocument(cssText);
			log('PATCH-1042, rentalbbs.livedoor.com - add missing gradients');
		}
		if(hostname.indexOf('wiki.livedoor.')>-1){
			var cssText = 'p.more a {background:-o-linear-gradient(top,#BEE,#7CD);}';
			cssText +='#login .bar-button a {background:-o-linear-gradient(top,#FFF,#EEE);}';
			cssText +='nav.secondary ul li a.on {background:-o-linear-gradient(top,#FC7,#FB4);}';
			cssText +='#site-header h1 a.wiki {background-size: 120px 25px!important;}';
			addCssToDocument(cssText);
			log('PATCH-1039, wiki.livedoor.com - add missing gradients');
		}
		if(hostname.indexOf('www.livedoor.')>-1){
			var cssText ='.advancedSearchInputChancelButton,a.clearHistory {background: -o-linear-gradient(top,#F32,#B00);}';
			cssText +='.global li a#applist_btn {background-size: 65px 26px;}';
			cssText +='.global li a#servicelist_btn {background-size:77px 26px;}';
			cssText +='.others .other_category .other_cell_time a.crt{background:-o-linear-gradient(top,#DDD,#BBB);}';
			cssText +='.topics-outer .news-photo img.newsphoto {-o-transform: scale(0.7); -o-transform-origin:top left;}';
			addCssToDocument(cssText);
			log('PATCH-1037, www.livedoor.com - add missing gradients and layout fix');
		}
		log('0, livedoor.com,livedoor.jp,livedoor.biz');
	} else if(hostname.endsWith('loyalbank.com')){
		HTMLElement.prototype.onselectstart = true;
		log('PATCH-707, loyalbank.com: prevent mousedown prevention');
	} else if(hostname.endsWith('m.iboa.pl')){
		document.addEventListener('DOMContentLoaded',
			function(){
				var elm = document.querySelector('meta[name="viewport"]');
				if(elm)elm.content += ' ,width=device-width';
			}
		,false);
		log('PATCH-779, m.iboa.pl: make it fit device-width');
	} else if(hostname.endsWith('m.mthai.com')){
		addCssToDocument('.ui-body-m{background-image: -o-linear-gradient(top, #666, #222);}');
		log('PATCH-752, m.mthai.com: add missing gradient');
	} else if(hostname.endsWith('mail.live.com')){
		addCssToDocument('.c_is { display: inline-block }');
	
		prepareFakeDesignMode();
		addCssToDocument('.ButtonList{display:none!important}');
	
		var styleSetterLookupMethod = document.createElement('span').style.__lookupSetter__;
		 CSSStyleDeclaration.prototype.__lookupSetter__ = function(prop){
			return styleSetterLookupMethod.call(document.createElement('span').style, prop);
		 };
		log('CORE-17447, Mispositioned sprites due to missing CSS\nUMAFINAL-1189, Fake designMode for Hotmail, hides rich text UI\nDSK-235885, Hotmail uses lookupGetter on prototypes, not instances');
	} else if(hostname.endsWith('mycoast.cccd.edu')){
		opera.defineMagicVariable('is_fox',function(){return true},null);
		log('PATCH-804, mycoast.cccd.edu: block browser block');
	} else if(hostname.endsWith('myportfolio.nbcn.ca')){
		opera.defineMagicFunction('checkBrowserVersion',function(){});
		log('PATCH-805, nbcn.ca - block browser block');
	} else if(hostname.endsWith('oldspice.com')){
		addPreprocessHandler(/has_postMessage\s*=\s*window\[postMessage\]\s*&&\s*!\$\.browser\.opera;/, 'has_postMessage = true;',true,function(el){return el.src.indexOf('jquery.ba-postmessage.js')>-1;});
		log('PATCH-961, oldspice.com - remove sniff in jQuery postMessage plugin (incorrectly assumes lack of postMessage).');
	} else if(hostname.endsWith('politics.ie')){
		document.addEventListener( 'DOMContentLoaded', function(){
		        var el = document.getElementsByClassName('ui-mobile-rendering')[0];
			if(el)el.className = el.className.replace(/ui-mobile-rendering/, '');
		}, false );
		log('PATCH-820, politics.ie: make mobile version render');
	} else if(hostname.endsWith('postdanmark.dk')){
		addPreprocessHandler(/has_postMessage\s*=\s*window\[postMessage\]\s*&&\s*!\$\.browser\.opera;/, 'has_postMessage = true;',true,function(el){return el.src.indexOf('jquery.ba-postmessage.js')>-1;});
		log('PATCH-1069, postdanmark.dk - remove sniff in jQuery postMessage plugin (incorrectly assumes lack of postMessage).');
	} else if(hostname.endsWith('thaiair.co.jp')){
		navigator.appName = 'M'+navigator.appName;
		log('PATCH-943, thaiair.co.jp - fix drop-down menu positioning');
	} else if(hostname.endsWith('www.dickmorris.com')){
		addCssToDocument('*{content:normal !important}')
		log('PATCH-929, dickmorris.com - avoid empty lightbox');
	} else if(hostname.endsWith('www.tumblr.com')){
		addCssToDocument(' .button.green{ background:-o-linear-gradient(#78b662,#679e55); } ');
		log('PATCH-854, tumblr: using old webkit-gradient without fallback');
	} else if(hostname.indexOf( '.56.com' )>-1){
		addCssToDocument(".so {background-color:transparent !important;} .search .so .so_input .inp_search{ width:232px !important; } ");
	
		addCssToDocument(".chn_nav { white-space:nowrap !important; }");
		log('YUSHAN-232, Fix search button position issues for 56.com\nYUSHAN-233, Fix hyperlinks position issue of 56.com');
	} else if(hostname.indexOf( 'windowsmedia.com' )!=-1 && pathname.match( /^\/mobile\// )){
		forceMobileView();
		log('OSAN-91, Mobile Windowsmedia site does not trigger mobile view');
	} else if(hostname.indexOf("lotteimall.com")>-1){
		var old_alert = alert;
		
		window.alert = function(e) {
		  if(e.indexOf('flashVer=') == -1) {
		    old_alert(e);
		  }
		}
		log('SEOUL-607, fixes a spurious alert on lotteimall.com');
	} else if(hostname.indexOf('.aol.') >-1){
		/* AOL */
		log('0, AOL');
	} else if(hostname.indexOf('.ebay.')>-1 || hostname.indexOf('.ebaydesc.')>-1){
		/* eBay issues */
	
	
		if(hostname.indexOf('my.ebay.')>-1){
			addCssToDocument('#msgTable,#scrDiv,#wrapperrcp{width: auto !important}');
			log('EMO-4726, Fix broken layout in ebay inbox');
		}
		if(hostname.indexOf('wap.ebay.cn')>-1){
			addCssToDocument('h2 {min-height: 22px; height: auto !important;}');
			log('PNGLAI-704, Avoid overlap');
		}
		log('0, eBay');
	} else if(hostname.indexOf('.evaair.com')>-1){
		navigator.appName='Netscape';
		log('PATCH-688, evaair.com: broken sniffing');
	} else if(hostname.indexOf('.google.')>-1){
		/* Google */
	
	
		if(hostname.contains('.google.') && pathname.indexOf('/imghp')==0){
			if(navigator.userAgent.indexOf('Opera Tablet/')>-1){
			 window.scrollTo=function(){}
			}
			log('PATCH-787, Make Google Image Search display on Opera Tablet');
		}
		if(hostname.contains('maps.google.')){
			addCssToDocument('.mini-header-container{background: linear-gradient(to bottom, #d9e2fa 1%,#bccdf9 100%);}');
			addPreprocessHandler(/-webkit-border-image/g,'-o-border-image');
			document.addEventListener('DOMContentLoaded',function(){
				var sl = document.getElementsByTagName('style');
				for(var i=0;i<sl.length;i++){
					sl[i].textContent = sl[i].textContent.replace(/-webkit-border-image/g,'-o-border-image');
				}
			}
			,false);
			log('PATCH-899, maps.google: fix gradient and border-image');
		}
		if(hostname.indexOf('mail.google.')>-1){
			window.opera.version = opera.version = function() { return 0; }
			log('SOKRI4-171, GMail detects mobile version as desktop version if opera.version() says 9.5');
		}
		if(hostname.indexOf('www.google.com')!=-1&&pathname.indexOf('/m')==0&&pathname.indexOf('/mail')==-1){
			addCssToDocument('.navbar { height: auto; !important; }');
			log('UMAFINAL-719, On narrow screens Google\'s navigation bar can wrap and cause overlap');
		}
		if(href=="http://www.google.com.tw/"){
			(function(){
			    opera.addEventListener('BeforeEventListener.keyup', function(e) {
			        if(e.event.target.name=='q') e.preventDefault();
			    }, false);
			    opera.addEventListener('BeforeEventListener.keydown', function(e) {
			        if(e.event.target.name=='q') {e.preventDefault();}
			    }, false);
			    var setInt=window.setInterval;
			    setInterval=function(func,time){
				if( time==10 )time=2000;
				setInt.call(this, func,time);
			    };
			    })();
			log('UMAFINAL-534, Autocomplete makes typing very slow on google.com.tw');
		}
		if(pathname.indexOf('/m')==0&&pathname.indexOf('mail')==-1){
			addCssToDocument('.navbar { height: auto; !important; }');
			log('SOKRI3-1403, Google Mail navigation bar overlaps if localised text is too long');
		}
		log('0, Google');
	} else if(hostname.indexOf('.usps.com')>-1){
		opera.defineMagicVariable('browserSupported',function(){return true},null);
		log('PATCH-718, USPS: work around old browser sniff');
	} else if(hostname.indexOf('.yahoo.')>-1){
		/* Yahoo! */
	
	
		if(hostname.indexOf('finance.yahoo.com')>-1){
			opera.addEventListener('BeforeEventListener.focusout', function(e){e.preventDefault();}, false);
			log('PATCH-406, Prevent currency menu from closing too fast on Y!Finance');
		}
		if(hostname.indexOf('froma.yahoo.co.jp')>-1){
			var cssText = 'div#rn_header,div#rn_sec_recommend_btn a {background: -o-linear-gradient(top,#F60,#F30);}';
			cssText += '.searchbtnlrg,div.rn_result_slim dl a.select {background: -o-linear-gradient(top, #7AE, #06C)}';
			addCssToDocument(cssText);
			log('PATCH-1056, froma.yahoo.co.jp - add missing gradients');
		}
		if(hostname.indexOf('mail')==-1){
			opera.addEventListener('AfterEventListener.load',
			function(){ try{ document.sf1.p.focus=function(){}; }catch(e){}},false);
			log('252519, Prevent page from focusing search field because it causes unexpected scrolling');
		}
		if(hostname.indexOf('mail.yahoo.')!=-1){
			prepareFakeDesignMode();
			log('UMAFINAL-1264, Fake designmode for Yahoo mail');
		}
		if(hostname.indexOf('yahoo.co.jp')>-1&&pathname == '/'){
			addCssToDocument('#srchbtn{width:25.9%}');
			log('PATCH-669, Fix wrapping Search button on Yahoo! Japan');
		}
		if(hostname=='new.m.yahoo.com'){
			scaleImagesToScreenWidth(); 
			log('OSAN2-281, Banner image goes over screen width on new.m.yahoo.com');
		}
		if(href=="http://www.tw.yahoo.com/"){
			opera.addEventListener('BeforeEventListener.keyup', function(e) {
			    if(e.event.target.name=='q') e.preventDefault();
			}, false);
			opera.addEventListener('BeforeEventListener.keydown', function(e) {
			    if(e.event.target.name=='q') {e.preventDefault();}
			}, false);
			log('UMAFINAL-534, Autocomplete makes typing very slow on www.tw.yahoo.com');
		}
		log('0, Yahoo!');
	} else if(hostname.indexOf('.youtube.com')>-1){
		window.__defineGetter__('innerHeight', function(){ return Math.max(document.documentElement.offsetHeight, document.body.offsetHeight, document.documentElement.scrollHeight); });
		log('JOZO81-2229, Make sure all thumbnails on youtube are visible, even in zoomed out mode');
	} else if(hostname.indexOf('10.235.148.9')>-1){
		if( document.documentElement ){ 
		 var meta=document.documentElement.appendChild(document.createElement('meta')); 
		 meta.setAttribute('name', "viewport"); 
		 meta.setAttribute('content', "width=340,user-scalable=no");
		}
		log('HMONY-1927, Remove overlapping text on vnet.mobi');
	} else if(hostname.indexOf('10086.cn')>-1){
		if(pathname.indexOf('m')>-1 && pathname.indexOf('service')>-1 ) {
		   //NHSP-427
		   addCssToDocument('.sel_001 li dd { height: auto !important; min-height: 140px;  } #header {white-space: nowrap;}');
			function addViewport() {
				var meta;
				if (document.createElement && (meta = document.createElement('meta'))) {
						meta.name = "viewport";
						meta.content = "width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes";
						document.getElementsByTagName('head')[0].appendChild(meta);
				}	
			}
			
			//<meta name="viewport" content="width=device-width, initial-scale=1.4, minimum-scale=1.0, maximum-scale=2.0"/>
			function setViewport(){
				//Remove iframe disturbance
				var docT = document;
				var eiFrame = docT.getElementsByTagName('iframe');
				if(eiFrame) {
					for(var i=0; i<eiFrame.length; i++) {
						eiFrame[i].parentNode.removeChild(eiFrame[i]);	
					}
				}
				
				var eMeta = docT.getElementsByTagName('meta');
				
				if(eMeta){
					for(var i=0; i<eMeta.length; i++){
						if(eMeta[i].getAttribute('name')){
							if(eMeta[i].getAttribute('name').toLowerCase()=='viewport') {
								eMeta[i].parentNode.removeChild(eMeta[i]);
							}
						}
					}
					addViewport();
				}
				else {
					addViewport();	
				}
			}	   
		   document.addEventListener("DOMContentLoaded", setViewport,false);
		}
		
	
		if(location.pathname.indexOf('m') >-1)
		      {  
			function ModifyViewportInitialScale()
			{
			   var eMeta = document.getElementsByTagName('meta'); 
			   if(eMeta)
			   { 
			      for(var i=0; i<eMeta.length; i++)
			      { 
			         if(eMeta[i].getAttribute('name'))
			         { 
			            if(eMeta[i].getAttribute('name').toLowerCase()=='viewport')
			            { 
			               var eViewportContent = eMeta[i].getAttribute('content'); 
			               
			               // To force use initial-scale=1.0 
			               if(eViewportContent.indexOf('initial-scale')>-1)
			               { 
			                  var reg = /initial-scale=[^,;]*[,;]/; 
			                  eViewportContent=eViewportContent.replace(reg,"initial-scale=1;"); 
			               } 
			               
			               eMeta[i].setAttribute('content',eViewportContent);
			            } 
			         } 
			      } 
			   } 
			}
		         ModifyViewportInitialScale(); 
		      } 
	
		if(pathname.indexOf('m') >-1){
		      addCssToDocument("#footer {min-width: 400px; background-color: #25557E !important; min-height: 38px; height: auto !important;} #footer li {line-height: normal;}"); 
		}
		log('NHSP-427, Fix layout broken issue of CMCC mobile page\nYUSHAN-2359, Fix zoom issue of 10086.cn (cmcc portal)\nYUSHAN-3557, Fix page footer display issue of 10086.cn/m');
	} else if(hostname.indexOf('11st.co.kr')>-1){
		opera.defineMagicFunction('openMainPopunder',function(){});
		log('DONGDAE-4055, Ignore popunder');
	} else if(hostname.indexOf('163.com')>-1){
		if(hostname.indexOf('3g.')>-1 ) {
		  if(pathname.indexOf('touch')>-1 ) {
			addCssToDocument('#mask { height: 0px !important; }');
		  }
		}
	
		if(hostname.indexOf('mail.')>-1 && hostname.indexOf('smart.')>-1) {
			addCssToDocument('.mod-login .loginBtn { -o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAqCAYAAABhqXGIAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwMS8wNy8xMUth1boAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzQGstOgAAACLUlEQVQ4jYWUX08TQRTFf3d2tlsQG4r8E4P/0Cc/gokPvPtg/JTEr6AhMRI/gPpEQkhMpDUthRQo7e7e68PS2d1ScJN52MmZc869587Il8O+AVxcTTj42aEzuGZ9OeHtm01aSwkAToDB+Yi9/SOurMmLnWdM3CJ7+0d0Ty8QwJkq3391WV1/xMbGCucTWFtrs7m1zsGPLprnuFwzfvcuabdb9C4zJpnSGaa02y1OTkdkeYZXhUlqOOeYpCkARvGJOMap4s2M6pp+4d8MTwWgc0BmhpfphiqmWoJUMTME8OGUFqsElfIeQNVQ6nKKoVoBlUx6B5MQADrrSQ0LcqaolfTFnqGmgP1fLlSnd8jVjavNlbMqqADUmVQ1tMSDBOo6aOpRSiasHgs3FWPgRQgst+TUEAnG75OrGDetVzetOHS82JiRM51pwT2eKnLFKc3rsYTshHIKbk2mVrO7iaQWi1q149Xsqsar2cl0Y84U1Jl0/r2rNtPumIIw44IUEdjMZIb5kvr4zsZSu3f3vgW1Ps3J7lafigekykTokxMRktiRpTmxkyIKA82LLOM4wjkHr7aX6Q+GbK0s0vCOp2sP6A+GPH/cohFHOHGO9+9e0uud86d7xurDBp2/Z/zp9Pmwu4Nzgnw9OrXxaMRJt8enz4ccnwzZ3lji4+5rtp+s0mwuIN+Oz0zznMl4zPX1FVma4WNPkizQSBIi74vqXBTRaDaJYo+pIs4RRb4wDPwDulhjLyjShpEAAAAASUVORK5CYII=) 0 4 0 4 stretch stretch;  } .mod-login .iptBox { background-color: #fff;} ');
		}
		
	
		if(hostname.indexOf('3g.')>-1 ) {
		  if(pathname.indexOf('special')>-1 ) {
			function addViewport163() {
				var meta;
				if (document.createElement && (meta = document.createElement('meta'))) {
						meta.name = "viewport";
						meta.content = "width=device-width, minimum-scale=1.0, initial-scale=1.4, maximum-scale=3.0, user-scalable=yes";
						document.getElementsByTagName('head')[0].appendChild(meta);
				}	
			}
			function setViewport163(){
				var docT = document;
				var eMeta = docT.getElementsByTagName('meta');
				
				if(eMeta){
					for(var i=0; i<eMeta.length; i++){
						if(eMeta[i].getAttribute('name')){
							if(eMeta[i].getAttribute('name').toLowerCase()=='viewport') {
								eMeta[i].parentNode.removeChild(eMeta[i]);
							}
						}
					}
					addViewport163();
				}
				else {
					addViewport163();	
				}
			}
			setViewport163(); 
		  }
		}
		
		log('NHSP-416, Wrong page layout display of 163.com touch version\nNHSP-403, Log in page display issue of smart.mail.163.com\nNHSP-459, Fix viewport issue of 3g.163.com special news ');
	} else if(hostname.indexOf('218.206.177.209')>-1){
		if(pathname.indexOf('waptest')>-1) {
		  addPreprocessHandler('history.back()', 'location.href="pass.htm"; window.open("mytest.html");' );
		}
		log('YUSHAN-3774, Fix pop up issue of  CMCC IOT test');
	} else if(hostname.indexOf('3g.cn')>-1){
		if((location.hostname.indexOf('xlive') > -1 )&& (pathname.indexOf('liveroom.html') > -1)){
		  addCssToDocument('#areaHeader{position:static !important;} .myTips{position:static;margin-top:'+(document.documentElement.clientHeight+20)+'px} .tempAD_area{bottom:0 !important; top:22px}');
		}
	
		if(hostname.indexOf('xuan.3g.cn')>-1) {
		 addCssToDocument('.navMain p a {width:16% !important; } .screen-gt320 h1, .screen-gt320 h1 a { font-size: 16px !important;  }');
		}
		log('NHSP-643, Blank page issue of liveroom on 3g.cn\nOMO-89, Fix page layout issues on 3G.cn');
	} else if(hostname.indexOf('3g.qq.com')>-1){
		if (hostname.indexOf('info') > -1 && pathname.indexOf('/g/s')==0) {
		 addCssToDocument('.stock, .img-news{float:left;} .stock-up-num, .stock-down-num, .marquee {float:right;} .t-center {display: inline-block; margin-left:2px; margin-right:2px;} #div_live_content > a {font-size:12px; !important; } .qq-product a  {display: inline-block !important;} .main-nav-list li, .main-nav-list li a { display:inline-block !important; } .cont-list { clear: both;} .oly-jpb { background: url("http://3gimg.qq.com/wap30/img/info3_new/oly_jpb_bg.png") 0% 0%/320px auto no-repeat #F6F7F8 !important; } #dd_jpb, .oly-jpb dt, .oly-jpb dd, .oly-jpb h3  { display: inline-block;} .crumb-nav { display: inline-block; border: 0px; } .crumb .home, .crumb .crumb-nav, .crumb .art-set { line-height: normal !important; position: static !important; }  .art-set, .home { border-width: 0px; }  .crumb div { display : inline-block; } .home { border: 0px; height: 30px !important; background-image: none; background-color: transparent; text-indent: 0em; } .crumb-nav a { padding: 0px 16px 0px 4px;} .home::after {background-color: transparent;} header#header .crumb .home, header#header .crumb .art-set { display : none; } '); 
		
		 function setHeaderHeight() {
			var g = document.querySelector('#header'); 
			if(g) {
				if(g.getAttribute('style')) {
					if(g.getAttribute('style') == 'height:43px;') {
						g.setAttribute('style','min-height:43px; height:auto;');
					}
				}
			}
		 }
		 document.addEventListener('DOMContentLoaded', setHeaderHeight, false);
		
		 opera.addEventListener('BeforeCSS', function(userJSEvent){ userJSEvent.cssText = userJSEvent.cssText .replace(/-(webkit)-(background-size)/g,'$2'); }, false);
		
		 opera.addEventListener('AfterScript', function(userJSEvent) {
		      if (typeof slide != "undefined" && slide.prototype) {
		        slide.prototype.cssTranslation = function(e, t) {
		          var n = $("#" + this.swapId);
		          n.css("left", e.slice(0, -1) * this.slideNum + "%");
		          n.css("OTransition", "left 0.4s ease-out");
		          n.css("transition", "left 0.4s ease-out");
		          n.css("OTransitionDuration", t);
		          n.css("transitionDuration", t);
		          n = null;}}});
		
		}
	
		if(hostname.indexOf('gp.') >-1) {
		  addCssToDocument('.submit {background-color:#48629D; }  .txt-input {width: auto !important;} .stock-list li { padding: 6px 6px; float: left; } .stock-list li:nth-last-child(3), .img-slide { clear:both; } ');
		}
	
		if(hostname.indexOf('pt.') > -1){
		    addCssToDocument('.lb_lg_btn{ background-image : -o-linear-gradient(top, #7CC130, #61A419) !important;} ');
		}
		if(hostname.indexOf('ti') > -1){
		    addCssToDocument('.logo a:first-child, .to3g, .search-btn:after, .tips-1, .tips-2, .tips-more,' +
		        ' .wb-interact-textarea:before, .ad-tips:before, .ad-tips-close, .timeline-nav-item a.select{background-size: auto 189px !important; } ' +
		        '.timeline-nav-item{display:inline-block !important;} header .t_subnav[selected="true"]{display:inline-block !important;} ' +
		        '.wb-interact-textarea {background : -o-linear-gradient(top, #E0E7EB, #ffffff) !important; -o-border-radius: 4px !important;} ' +
		        '.wb-num:before{background-size: auto 189px !important; } .wb-interact-avatar:before{background-size: 40px auto !important;} ' +
		        '.back-btn:after, .refresh-btn:after{background-size: auto 189px !important;} nav.toolbar a{display:inline-block !important;} ' +
		        '.send-btn{background: -o-linear-gradient(top, #7EC434, #5A9C12) !important;} ' +
		        '.ico-del:before, .ico-area:before, .ico-bq:before, .ico-at:before, .ico-ht:before, .ico-pic:before, .ico-wz:before {background-size: auto 189px !important;}');
		}
		log('NHSP-467, Fix element shows abnormally issue of 3g.qq.com\nNHSP-417, Broken layout on stock page in 3g.qq.com\nNHSP-475, Layout issue of Tencent Weibo ti.3g.qq.com');
	} else if(hostname.indexOf('3g.sina.com')>-1){
		addCssToDocument('body, #mainpage, .headbox .mate, .nav_content_list, .nav_content_list .nav_content_item, .wrap, header,nav,section,footer { min-width: 320px; width: auto !important;  } .nav_content_list .nav_content_item { display: block !important; float: none !important;} .wrapper .scroller ul.slide_img_list { width: auto !important;} .tit { clear: both; } .headnav { white-space: nowrap; }');
		
		if(hostname.indexOf('down.')>-1) {
			addCssToDocument('.search .s1 input.common-btn, .search .s2 input { color: #333 !important; } '); 
		}
		
		function nolazy() {
				var g = document.querySelectorAll('ul.wb_Recommend');
				if(g) {
					for(var i=0; i< g.length; i++) {
						if(g[i].getAttribute('data-role') == 'lazy') {
							g[i].removeAttribute('data-role');
						}
					}
				}
				var g3 = document.querySelectorAll('img');
				if(g3) {
					for(var i=0; i< g3.length; i++) {
						if(g3[i].getAttribute('data-src')) {
							g3[i].setAttribute('src', g3[i].getAttribute('data-src'));
						}
				
						if(g3[i].getAttribute('original')) {
							g3[i].setAttribute('src', g3[i].getAttribute('original'));
						}
					}
				}
		}
		document.addEventListener("DOMContentLoaded", nolazy,false);
		log('NHSP-452, Fix layout issue and images display issue of new designed 3g.sina.com.cn');
	} else if(hostname.indexOf('3g.sina.com.cn')>-1){
		if(pathname.indexOf('/iask/')==0)
		{   
		    addCssToDocument('#toolbar .osContainer {width:90% !important; } #main h2.hd {padding: 0 !important; background: -o-linear-gradient(#FFFFFF,#E9E9E9) !important;} #main h2.hd > .title span {margin-left:8px !important;}');
		}
		log('OMO-103, Fix searchbox display issue of sina iAsk (webkit)');
	} else if(hostname.indexOf('58.com')>-1){
		if(hostname.indexOf('m.')>-1){
		 addCssToDocument('.infolst .tit{height:auto !important} .infolst .tit strong{width:80%}');
		}
		
		log('NHSP-568, Overlap issue in search result page of 58.com');
	} else if(hostname.indexOf('addynamix.com') > -1){
		addCssToDocument('#main {overflow: visible;}');
		log('SEOUL-601, Fixes panning on addynamix.com');
	} else if(hostname.indexOf('aeonretail.jp')>-1){
		addPreprocessHandler(/var el = win \? \$\.browser\.opera \? document\.body : document\.documentElement : elem;/, 'var el = win ? document.documentElement : elem;', true, function(elm){ return elm.src&&elm.src.indexOf('scroll.js')>-1&&elm.text.indexOf('Opera 9.22')>-1; });
		log('PATCH-88, Make links work on Aeonretail (outdated jQuery plugin detects Opera and scrolls up)');
	} else if(hostname.indexOf('ameblo.jp')>-1){
		addCssToDocument('.startBtn,.registBtn {background:-o-linear-gradient(top,#5C0,#3A0);} .socialLoginBtn li {background-size: 135px 30px!important;}'); 
		log('PATCH-839, ameblo.jp - add missing gradients and background-size');
	} else if(hostname.indexOf('ana.co.jp')>-1){
		var cssText = '';
		cssText += 'img:not([width]) {transform: scale(0.5); transform-origin:top;}';
		cssText += '#config-btn-next a {background-image: -o-linear-gradient(top, #FC3, #F82);}';
		cssText += 'p.txtBnr {background:-o-linear-gradient(top, #1F559A, #0A3A73);}';
		addCssToDocument(cssText);
		log('PATCH-953, ana.co.jp - add missing gradient and fix for css zoom');
	} else if(hostname.indexOf('athome.co.jp') > -1){
		opera.defineMagicFunction('checkTargetBrowser',function(){});
		opera.defineMagicFunction('checkTargetCookie',function(){});
		log('PATCH-147, athome.co.jp Hide warning messages because of Browser UA');
	} else if(hostname.indexOf('autohome.com.cn')>-1){
		function lazyloadiframe_replace(real, thisObject, oParam1, oParam2)
		{
		    oParam1.readyState = "complete";
		    oParam2 = true;
		    return real(oParam1, oParam2);
		};
		
		window.opera.defineMagicFunction('lazyloadIframe', lazyloadiframe_replace);
		log('OMO-345, Images loading issue on autohome.com.cn');
	} else if(hostname.indexOf('baidu.com')>-1){
		if(hostname.indexOf('www.') >-1 && href.indexOf('s?') > -1){
		      addCssToDocument("#head form, #search form { white-space: nowrap !important; }");
		}
	
		if(hostname.indexOf('image.')>-1){
		addCssToDocument(" #kw{width:200px !important;  } #l, #nv { width: auto !important; text-indent: 0px !important; text-align:center; }  form[name=f], form[name=f1], #nv, #l {white-space:nowrap; } #mCon { display:none;} ");
		}
	
		if(hostname.indexOf('wap.') >-1 || hostname.indexOf('m.') >-1 || hostname.indexOf('gate.') >-1) {
		 if(pathname.indexOf('news')>-1 || location.search.indexOf('news')>-1) {
		  var iWidth = window.innerWidth;
		  iWidth = iWidth - 20; 
		  addCssToDocument('p img, div img { max-width:'+ iWidth +'px !important; }');
		 } 
		}
	
		if(hostname.indexOf( 'news.baidu.com' )>-1){
		  addCssToDocument(".hotwords dd br {height:0px !important;line-height:0px !important; } .hotwords dd a { font-size:12px !important; }");
		}
		
	
		if(hostname.indexOf('music.')>-1){
		window.WebKitCSSMatrix = function FakeWebKitCSSMatrix(input) {
		  var input = input || "translate(0, 0)";
		  var func = input.split('(')[0].trim();
		  var middle = input.split('(')[1].split(')')[0].split(',');
		  if (func == 'translate')
		    return {e: middle[0].trim(), f: middle[1].trim()};
		  else if (func == 'matrix')
		    return {e: middle[4].trim(), f: middle[5].trim()};
		  else
		    return {e: '0', f: '0'};
		};
		
		addCssToDocument(// first time page
		                 ".guide-title { background-size: 282px 31px; }" +
		                 ".guide-img { background-size: 284px 212px; }" +
		                 ".guide-download, .guide-skip { background-size: 140px 45px; }" +
		                 ".guide-word { background-size: cover; }" +
		                 // main page
		                 "#logo { background-size: 72px 23px; }" +
		                 ".h_tabs { white-space: nowrap; }" +
		                 ".h_tab, .tabTx, .more { display: inline; }" +
		                 ".arrow { display: inline-block; }" +
		                 ".tabTx { padding: 4px 5px; }" +
		                 ".more_links { font-size: 0; white-space: nowrap; }" +
		                 ".more_links a { display: inline-block; font-size: 16px; }" + 
		                 "#se_inner { width: auto; }" +
		                 "#se_bn, #se_bn2 { position: absolute; right: 0; top: 0;" +
		                 "                  background-image: -o-linear-gradient(to bottom, #F7F7F7, #DFDFDF);" +
		                 "                  background-image: linear-gradient(to bottom, #F7F7F7, #DFDFDF);" +
		                 "                  box-shadow: 1px 1px 0 rgba(0, 0, 0, .1),1px 1px 0 white inset; }" +
		                 ".sub-head.tab { font-size: 0; white-space: nowrap; }" +
		                 ".sub-head.tab > * { font-size: 18px; }" +
		                 ".sub-head.tab .tab-new, .sub-head.tab .tab-hot, .sub-head.tab .tab-star" +
		                 "  { display: inline-block; box-sizing: border-box; }" +
		                 ".portrait .ad { background-size: cover; }" +
		                 ".content-new .list-item .item-index," +
		                 ".content-hot .list-item .item-index," +
		                 ".list-item .list-cover" +
		                 "  { float: left; }" +
		                 ".list-item { position: relative; }" +
		                 ".list-item .list-songtitle, .list-item .list-albumcover" +
		                 "  { margin-right: 48px; }" +
		                 ".list-item .list-albumtitle { margin-right: 30px; }" +
		                 ".list-item .list-downloadimg, .list-item .list-play" +
		                 "  { position: absolute; right: 0; top: 0; }");
		 
		opera.addEventListener('AfterScript', function(userJSEvent) {
		  if (pathname == "/" && window.$)
		    $("#top_sub_head").show();
		});
		}
	
		if( (hostname.indexOf('m.baidu.com') > -1  && pathname.indexOf('/ssid=') > -1 ) || //news
		    (hostname.indexOf('m.baidu.com') > -1  && pathname.indexOf('/img') > -1 ) || //image
		    (hostname.indexOf('m.baidu.com') > -1  && pathname.indexOf('/video') > -1 ) || //image
		    hostname.indexOf('wapiknow.baidu.com') > -1 ||
		    hostname.indexOf('wapbaike.baidu.com') > -1 ||
		    hostname.indexOf('news.baidu.com') > -1 ||
		    hostname.indexOf('wk.baidu.com') > -1
		)
		{   
		    opera.addEventListener('AfterEvent.DOMContentLoaded', function(userJSEvent){
		        var B = getElementById("o_more");
		        var E = getElementById("o_body");
		        var F = getElementById("o_list");
		        // alert("B="+ B + "E=" + E + "F=" + F);
		        if (B && E && F) B.addEventListener("click",
		          function(_) {
		            // alert("sldjf");
		            if (!E.style.display || E.style.display == "none") {
		                var $ = document.body.offsetHeight;
		                E.style.width = "100%";
		                E.style.height = $ - 31 + "px";
		                E.style.display = "block";
		                F.style.visibility = "visible";
		                F.style.left = B.offsetLeft - 1 + "px";
		                F.style.top = B.offsetTop + 29 + "px";
		                E.addEventListener("click",
		                function() {
		                    F.style.visibility = "hidden";
		                    E.style.display = "none";
		                },
		                false)
		            } else {
		                F.style.visibility = "hidden";
		                E.style.display = "none";
		            }
		        },
		        false);
		    }, false);
		}
		
		if(hostname.indexOf('i.hi.baidu.com') > -1)
		{
		    opera.addEventListener('AfterEvent.DOMContentLoaded', function(userJSEvent){
		        var aa = getElementById("get_more_links");
		
		        opera.addEventListener('BeforeEvent.click',function(e){
		            var t = e.event.target;
		            if(t == aa)
		            {
		                var A = $("#get_more_links").find("small");
		                if (A.hasClass("on")) {
		                    A.removeClass("on").addClass("off");
		                } else {
		                    A.removeClass("off").addClass("on");
		                }
		                $("#more_links").toggle();
		            }
		            else
		            {
		                var A = $("#get_more_links").find("small");
		                if (A.hasClass("on")) {
		                    A.removeClass("on").addClass("off");
		                }
		                $("#more_links").hide();
		            }
		
		        },false);
		
		    }, false);
		}
		log('YUSHAN-3971, Fix search result page display issue of baidu.com\nYUSHAN-2320, Fix links display inside searchbox - image.baidu.com\nNHSP-402, Fix image display issue on baidu news\nYUSHAN-278, Text truncation in blog/forum module - news.baidu.com\nNHSP-478, Page display issue of music.baidu.com\nOMO-102, Fix "more" link issue of m.baidu.com');
	} else if(hostname.indexOf('bloog.pl')>-1){
		var cssText = '';
		cssText += '.cnt {background: -o-linear-gradient(top, #FFF, #E4E4E4)}';
		cssText += '.cnt {background: linear-gradient(to bottom, #FFF, #E4E4E4)}';
		cssText += '.right .bar {background: -o-linear-gradient(top, #2BF, #00B);}';
		cssText += '.right .bar {background: linear-gradient(to bottom, #2BF, #00B);}';
		cssText += '.buttonBlue {background: -o-linear-gradient(top, #4DF, #09D);}';
		cssText += '.buttonBlue {background: linear-gradient(to bottom, #4DF, #09D);}';
		addCssToDocument(cssText);
		log('PATCH-867, bloog.pl - add missing gradients');
	} else if(hostname.indexOf('britishairways.')!=-1){
		opera.defineMagicFunction('CP_getCalendar', function(oReal, oThis){
		var cal = oReal.apply(oThis, slice.call(arguments, 2));
		end = cal.indexOf('</iframe>')+9;
		cal = cal.substring(end); 
		return cal; 
		}
		); 
		
		log('256172, britishairways.com hides calendar behind IFRAME');
	} else if(hostname.indexOf('chinatimes.com')>-1){
		window.history.go=function(){};
		log('UMAFINAL-1483, Prevent unexpected back navigation on chinatimes.com');
	} else if(hostname.indexOf('clearwire.com')!=-1){
		opera.defineMagicVariable('flash', function(o){ o.embedMovie = function(swfFile,width,height,bgcolor,ver,altFormat,params) { s = '<embed src="'+swfFile+'" quality="high" type="application/x-shockwave-flash" swLiveConnect=true pluginspage="https://www.macromedia.com/go/getflashplayer" width=' + width + ' height=' + height + ' bgcolor="'+bgcolor+'"></embed>\n'; document.write(s); }; o.hasVersion=function(){return true;}; o.swf=true; return o;}, null);
		log('PIONER-268, PIONER-268 Flash on clearwire.com doesn\'t display on homepage');
	} else if(hostname.indexOf('cr.mufg.jp')>-1){
		if(pathname.indexOf('/spn/')>-1){
			addCssToDocument('h1,h2 {background: -o-linear-gradient(top,#E33,#B00);} h2.verGray {background: -o-linear-gradient(top,#FFF,#DDD);}');
			} else if(pathname.indexOf('/newsplus/')>-1){
			addCssToDocument('#page .gnaviWrap {background: -o-linear-gradient(top,#300,#702);}');
		}
		log('PATCH-845, cr.mufg.jp - add missing gradients');
	} else if(hostname.indexOf('cs.kddi.com')>-1){
		HTMLInputElement.prototype.__defineSetter__('disabled', function(){});
		log('PATCH-656, Fix disabled buttons on KDDI Customer Support page');
	} else if(hostname.indexOf('dcinside.com') > -1){
		addCssToDocument('body {overflow: visible} .favoriteDiv {overflow: visible} .dcMainAll {overflow: visible}');
		log('SEOUL-22, Fixes having scrollbars appear when panning on dcinside.com');
	} else if(hostname.indexOf('digg.com')!=-1){
		        opera.addEventListener('BeforeExternalScript', function(e){
		            var oldua=navigator.userAgent;
		            navigator.userAgent = navigator.userAgent.replace( /Opera Mobi/, '' );
		            opera.addEventListener('AfterExternalScript',function(){
		                navigator.userAgent=oldua;
		            }, false);
		        },false);
		    
		log('PENGU-745, Can not login to digg.com');
	} else if(hostname.indexOf('forever21.co.jp') > -1){
		if (pathname.indexOf('QuickView.aspx')>-1) {
			addCssToDocument('html{background:#fff}');
		}
		log('PATCH-617, missing QuickView background color on Forever21.co.jp');
	} else if(hostname.indexOf('frys.com')>-1){
		addPreprocessHandler('self.parent.location=document.location;','if(self!=top)self.parent.location=document.location;');
		log('PATCH-638, frys.com: avoid racy framebuster due to lack of script async');
	} else if(hostname.indexOf('ganji.cn')>-1){
		if((hostname.indexOf('3g.')>-1 && location.search.indexOf('vvcc=3g')>-1) || location.search.length < 1) {
			//NHSP-426 	  
			opera.addEventListener('BeforeCSS', function(userJSEvent){
				  userJSEvent.cssText = userJSEvent.cssText.replace(/-(moz|ms|webkit)-(linear-gradient|gradient|transform|transition|background-size|text-size-adjust|tap-highlight-color|touch-callout|appearance|animation|keyframes)/g,'-o-$2');
			}, false);
			
			opera.addEventListener('BeforeCSS', function(userJSEvent){
			  userJSEvent.cssText = userJSEvent.cssText.replace(/-(moz|ms|webkit)-(border|border-radius|border-top-left-radius|border-bottom-left-radius|border-top-right-radius|border-bottom-right-radius|text-overflow| box-shadow|box|box-sizing|box-pack|box-align|box-flex|box-orient)/g,'$2')
			}, false);
			
			//Opera Doesn't support display: box; box-flex: 1; 
			addCssToDocument('.gj-tab div {display:inline-block; width: 22.5%; } .gj-ntab-list div { display:inline-block; width: auto !important;  .gj-ntab-list div, .gj-ntab-index div { padding: 0px;} } .gj-footer-nav1 a  {display:inline-block; margin: 0px; padding: 0px 6px; } .gj-footer-nav2 a { display:inline-block; width: 40.5%; } .gj-footer-nav3 a { display:inline-block; width: 30%; } .gj-w-search {  background: -o-linear-gradient(top,#53AF00, #368F04); } ');
		}
		
		log('NHSP-426, Fix touch version layout issue of 3g.ganji.com');
	} else if(hostname.indexOf('geoaccess.com')!=-1){
		opera.defineMagicVariable('is_nav', function(){return true;}, null);
		
		log('318050,  BlueCross browser sniffing prevents insurance search');
	} else if(hostname.indexOf('goo-net.com')>-1){
		if(pathname.indexOf('/ipn/')>-1){
			var cssText = ''; 
			cssText +='#top h2 {background:#25333B url(/usedcar/common/img/iphone/icon_titlebar.gif) no-repeat left center;}';
			cssText +='#top h2 {background:url(/usedcar/common/img/iphone/icon_titlebar.gif) no-repeat left center, -o-linear-gradient(bottom, #25333B, #B6BEC9);}';
			cssText +='#top h2 {background:url(/usedcar/common/img/iphone/icon_titlebar.gif) no-repeat left center, linear-gradient(to top, #25333B, #B6BEC9);}';
			addCssToDocument(cssText);
		}
		else if(pathname.indexOf('/ipad/')>-1){
			var cssText = ''; 
			cssText +='header nav ul {background-color: #363636;}';
			cssText +='header nav ul {background: -o-linear-gradient(top, #363636, #5A5A5A);}';
			cssText +='header nav ul {background: linear-gradient(to bottom, #363636, #5A5A5A);}';
			addCssToDocument(cssText);
		}
		log('PATCH-848, goo-net.com - add missing gradients and fallback bg color for mini');
	} else if(hostname.indexOf('gougou.com')>-1){
		addCssToDocument(".searchform .in_txt { width: 110px !important;} .searchform { width: 225px !important; }");
		log('YUSHAN-2457, Fixed gougou.com search button display issue');
	} else if(hostname.indexOf('gry.pl')>-1){
		var cssText = '';
		/* Top Menu */
		cssText += 'header > nav > ul > li a.active {background: -o-linear-gradient(top,#4B9BE9,#0170D7);}';
		cssText += 'header > nav > ul > li a.active {background: linear-gradient(to bottom, #4B9BE9, #0170D7);}';
		addCssToDocument(cssText);
		log('PATCH-866, gry.pl - add missing gradients');
	} else if(hostname.indexOf('hangame.co.jp')>-1){
		var cssText = '';
		/* top page */
		cssText += '.m-rttnIcnAreaT00P00 {background: -o-linear-gradient(top, #FFF 40%, #EAEAEA 41%, #F7F7F7);}';		
		cssText += '.p-tabT00P02 .tab, .p-tabT00P01 .tab {box-sizing: border-box; background:-o-linear-gradient(top, #FBFBFB, #F0F0F0);}';
		/* game page */
		cssText += '.p-btnT00P01 .u-w {background: -o-linear-gradient(top, #F66625, #CC1E03);}';
		/* login page */
		cssText += '.p-inpt .inpt input, .p-btn {box-sizing: border-box;}';
		cssText += '.p-btnT01P01 .u-w {background: -o-linear-gradient(top, #FFF 20%, #E5E5E5 80%);}';
		cssText += '.p-btn .u-w {box-sizing: border-box;}';
		addCssToDocument(cssText);
		log('PATCH-868, hangame.co.jp - layout fix and add missing gradient');
	} else if(hostname.indexOf('hao123.com')>-1){
		document.__defineGetter__('GlobalSharedObject', function(){ return document.getElementById('GlobalSharedObject'); });
		log('DONGDAE-3678, Make sure site accesses correct Flash instance for saved user data');
	} else if(hostname.indexOf('huntington.com')>-1){
		opera.defineMagicVariable('browserOkay',function(){return true},null);
		log('PATCH-712, huntington.com: work around browser sniff');
	} else if(hostname.indexOf('jabong.com')>-1){
		opera.addEventListener('BeforeCSS', function(e){
		  e.cssText = e.cssText.replace(/.clearfix:after,#content,#content:after,/g,'.clearfix:after,#content:after,');
		}, false);
		log('PATCH-658, jabong.com: override usage of CSS content property on element content');
	} else if(hostname.indexOf('java.vnet.mobi')>-1){
		if( document.documentElement ){ 
		 var meta=document.documentElement.appendChild(document.createElement('meta')); 
		 meta.setAttribute('name', "viewport"); 
		 meta.setAttribute('content', "width=340,user-scalable=no");
		}
		
		log('HMONY-1927, Remove overlapping text on vnet.mobi');
	} else if(hostname.indexOf('jugem.jp')>-1){
		var cssText = '';
		/* page Top icons */
		cssText += '.jugem_header_right {background: -o-linear-gradient(top, #999, #333);}';
		cssText += '.jugem_header_right {background: linear-gradient(to bottom, #999, #333);}';
		cssText += '.jugem_mn_login {background: -o-linear-gradient(top, #FEB235, #ED7902);}';
		cssText += '.jugem_mn_login {background: linear-gradient(to bottom, #FEB235, #ED7902);}';
		/* category bars */
		cssText += '.jugem_btm_all_category {background: -o-linear-gradient(top, #FFFFFF,#D8D8D8);}';
		cssText += '.jugem_btm_all_category {background: linear-gradient(to bottom, #FFFFFF,#D8D8D8);}';
		/* button at page bottom */
		cssText += '.jugem_entry_button, .jugem_entry_button:visited {background: -o-linear-gradient(bottom, #FF18AC, #FF50CC);}';
		cssText += '.jugem_entry_button, .jugem_entry_button:visited {background: linear-gradient(to top, #FF18AC, #FF50CC);}';
		addCssToDocument(cssText);
		log('PATCH-893, jugem.jp - add missing gradients');
	} else if(hostname.indexOf('konami.jp')>-1){
		var cssText = '';
		cssText += '#searchArea {background-image: -o-linear-gradient(bottom,#1CB3FF 40%,#57DBFF 94%,#2DCBFF);}';
		cssText += '#tabnews .tabnavigation li.now {background-image: -o-linear-gradient(bottom,#E65F68,#C42931 25%,#A70000);}';
		cssText += '.titlebar h3 {background-image: -o-linear-gradient(bottom,#E65F68,#C42931 25%,#A70000 90%);}';
		addCssToDocument(cssText);
		log('PATCH-944, konami.jp - add missing gradients');
	} else if(hostname.indexOf('linkedin.com')>-1){
		addCssToDocument('#li-header{background-image: -o-linear-gradient(top,white,#D2CFCA);}');
	
		var cssText = '';
		/* Login Button */
		cssText += '.controls .text, .controls input[type="submit"].text, .controls input[type="button"].text {background-image: -o-linear-gradient(top,#1F6A8D,#0E3E54);}';
		cssText += '.controls .text, .controls input[type="submit"].text, .controls input[type="button"].text {background-image: linear-gradient(to bottom,#1F6A8D,#0E3E54);}';
		addCssToDocument(cssText);
		log('PATCH-1010, linkedin.com - add missing gradients top bar\nPATCH-865, linkedin.com - add missing gradients');
	} else if(hostname.indexOf('m.chase.com')>-1){
		var cssText = '';
		/* Fixes for ATM and Branch icon*/
		cssText += '.branch {background-position: 0 0 !important;}';
		cssText += '.atm {background-position: 0 -80px !important;}';
		/* Fixes for dialogs and containers */	
		cssText += '.ui-dialog-datebox .ui-datebox-container .ui-datebox-gridminus .ui-icon-minus {background-position: -144px !important;}';
		cssText += '.ui-dialog-datebox .ui-datebox-container .ui-datebox-gridplus .ui-icon-plus {background-position: -108px !important;}';
		/* Fixes for Home and More Menu */
		cssText += '.home-logon-icon{background-position: -375px !important;}';
		cssText += '.more-find-atm-branch-icon,.home-find-atm-branch-icon {background-position: -409px !important;}';
		cssText += '.more-contactus-icon,.home-contactus-icon {background-position: -511px !important;}';
		cssText += '.more-alerts-icon {background-position: -579px !important;}';
		cssText += '.more-faqs-icon {background-position: -443px !important;}';
		cssText += '.more-privacy-icon {background-position: -239px !important;}';
		cssText += '.more-disclosures-icon {background-position: -477px !important;}';
		cssText += '.tel-icon .ui-icon {background-position: -648px 0 !important;}';
		/* QuickPay Menu */
		cssText += '.qp-send-money-icon {background-position: -137px !important;}';
		cssText += '.qp-request-money-icon {background-position: -171px !important;}';
		cssText += '.qp-todo-list-icon {background-position: -103px !important;}';
		cssText += '.qp-manage-recipients-icon {background-position: -35px !important;}';
		cssText += '.qp-change-pending-icon {background-position: -545px !important;}';
		cssText += '.qp-view-activity-icon {background-position: -69px !important;}';
		/* Pay & Transfer Menu */
		cssText += '.pt-credit-card {background-position: -307px !important;}';
		cssText += '.pt-bill-pay {background-position: -341px !important;}';
		cssText += '.pt-quick-pay {background-position: -205px !important;}';
		cssText += '.pt-transfer-money {background-position: -273px !important;}';
		cssText += '.pt-wire-transfer {background-position: -1px !important;}';
		addCssToDocument(cssText);
		log('PATCH-792, m.chase.com - Positional fixes for images');
	} else if(hostname.indexOf('m.dangdang.com')>-1){
		if(hostname.contains('m.')){
		  if(pathname == "/touch" || pathname == "/touch/"){
		    location.href = 'http://m.dangdang.com/?source=touch';
		  }
		}
		
		addCssToDocument('input.sf_btn { margin-left: 0 !important;}');
		log('NHSP-664, Page display issue of Dangdang.com');
	} else if(hostname.indexOf('m.deadspin.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Deadspin)');
	} else if(hostname.indexOf('m.gawker.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Gawker)');
	} else if(hostname.indexOf('m.gizmodo.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Gizmodo)');
	} else if(hostname.indexOf('m.io9.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (io9)');
	} else if(hostname.indexOf('m.jalopnik.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Jalopnik)');
	} else if(hostname.indexOf('m.jezebel.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Jezebel)');
	} else if(hostname.indexOf('m.kokunaisen.com')>-1){
		/* slide support */
		CSSStyleDeclaration.prototype.__defineSetter__('webkitTransform', function(o){this.OTransform=o});
		CSSStyleDeclaration.prototype.__defineSetter__('webkitTransitionDuration', function(o){this.OTransitionDuration=o});
		/* add icons */
		var cssText = '';
		cssText += '.ContentsTitle {background-color:#075;}';
		cssText += '#mainMenu .typeSeat {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_seat.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%!important;}';
		cssText += '#mainMenu .typeTicket {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_ticket.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeHistory {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_history.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeHotel {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_hotel.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeCar {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_car.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeTicketHotel {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_ticket_hotel.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeMember {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_member.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeContact {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_contact.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeQA {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_qa.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeTermsofuse {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_termsofuse.png) no-repeat,url(http://m.kokunaisen.com/counter/images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		cssText += '#mainMenu .typeInfo {background:url(http://m.kokunaisen.com/counter/images/iphone/icon_info.png) no-repeat,url(../images/iphone/icon_btn_arrow.png) no-repeat 98%;}';
		addCssToDocument(cssText);
		log('PATCH-1050, m.kokunaisen.com - slide support and add missing icons');
	} else if(hostname.indexOf('m.kotaku.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Kotaku)');
	} else if(hostname.indexOf('m.lifehacker.com')>-1){
		fixGawkerMobile();
		log('PATCH-655, Fix Gawker Media mobile site (Lifehacker)');
	} else if(hostname.indexOf('m.mapbar.com') > -1){
		window.addEventListener('load',function(){
		    setTimeout(function(){
		        if (map.size().width != window.innerWidth){
		            resizeApp();
		        }
		    },100);
		},false);
		log('NHSP-471, Full screen launching issue of m.mapbar.com');
	} else if(hostname.indexOf('m.reference.com')!=-1){
		forceMobileView();
		log('TWEETY-107, Mobile reference.com uses generic doctype');
	} else if(hostname.indexOf('m.sohu.com')>-1){
		addCssToDocument('header { background: -o-linear-gradient(top, #3c90d8, #3691c3); } .OLMP_APP_AD { display: none !important; } .h4WP .h4, .h4WP .vhr { display: inline-block !important; } .pl .h4 { width: 48% !important; display: inline-block !important;  } ');
		log('NHSP-470, Fix webkit caused layouts issue of m.sohu.com touch version');
	} else if(hostname.indexOf('m.tiexue.net')>-1){
		addCssToDocument(' body, nav li, .submenu li, .list01 li, .mixed .dt { font-weight : normal !important;}');
		log('NHSP-472, Too big font for m.tiexue.net');
	} else if(hostname.indexOf('m.weibo.cn')>-1){
		addCssToDocument('.ctrea { clear:both; }');
	
		addCssToDocument('.user_ta .user_if { display:inline-block; margin-right: 4px; }');
	
		addCssToDocument('.diack .btn { color: #fff !important; background-image: none !important; background: rgba(32, 32, 32, 0.6) !important; border: 0px !important; border: 1px solid #222; } ');
	
		addCssToDocument(".user_dm, .user_load { float: left; }");
		window.WebKitCSSMatrix = function FakeWebKitCSSMatrix(input) {
		  var input = input || "translate(0, 0)";
		  var func = input.split('(')[0].trim();
		  var middle = input.split('(')[1].split(')')[0].split(',');
		  if (func == 'translate')
		    return {e: middle[0].trim(), f: middle[1].trim()};
		  else if (func == 'matrix')
		    return {e: middle[4].trim(), f: middle[5].trim()};
		  else
		    return {e: '0', f: '0'};
		};
		opera.addEventListener('BeforeScript', function(userJSEvent) {
		  userJSEvent.element.text = userJSEvent.element.text.replace(/webkitT/g, "OT")
		})
	
		opera.defineMagicFunction('validat', 
		        function()
		        {
		            var d = document,
		            g = 'getElementById',
		            f = d[g]('form'),
		            o1 = d[g]('zh'),
		            o2 = d[g]('mm');
		            if (o1.value == "") {
		                alert("");
		                o1.focus();
		                return;
		            }
		            if (o2.value == "") {
		                alert("");
		                o2.focus();
		                return;
		            }
		            f.action = "login";
		            f.submit();
		        }
		    );
	
		addCssToDocument('.faceico, .atico, .htico, .pos, .upload { width: 40px; !important; }');
	
		if(href.indexOf('m.weibo.cn/showpic')!=-1)
		{
			addCssToDocument("body .orgpic { background:-o-linear-gradient(top, #2074AF, #2C91D2) !important; }");
		}
	
		addCssToDocument('.caico{ background: url(http://u1.sinaimg.cn/upload/h5/img/v4/ca.png) no-repeat center, -o-linear-gradient(#d1e9ff,#e7f4ff);border-radius: 0 3px 3px 0;!important;}');
	
		/**
		*  Taken from third party:
		*  URL encode / decode
		*  http://www.webtoolkit.info/
		*
		**/
		function url_decode(url_str){
		        utftext = unescape(url_str);
		        var string = "";
		        var i = 0;
		        var c = c1 = c2 = 0; 
		
		        while ( i < utftext.length ) {
		                c = utftext.charCodeAt(i);
		
		                if (c < 128) {
		                        string += String.fromCharCode(c);
		                        i++;    
		                }       
		                else if((c > 191) && (c < 224)) { 
		                        c2 = utftext.charCodeAt(i+1);
		                        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63)); 
		                        i += 2; 
		                }       
		                else {  
		                        c2 = utftext.charCodeAt(i+1);
		                        c3 = utftext.charCodeAt(i+2);
		                        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)); 
		                        i += 3; 
		                }       
		
		        }       
		        return string; 
		}
		
		    opera.defineMagicFunction('searchTopic',
		        function(origin_func, thisObject, c)
		        {
			    c[1] = url_decode(c[1]);
		            origin_func(c);
		        }
		    );
	
		addCssToDocument('.fhs .return, .fhs .btn {background: -o-linear-gradient(#fff,#eaf5ff) !important;}');
		log('OMO-400, Fix m.weibo.cn screwed up issue\nNHSP-410, Fix friend thumbnails don\'t show in order of m.weibo.cn\nNHSP-434, Original photo button display issue of m.weibo.cn\nNHSP-409, Fix recommended friend section error of m.weibo.cn\nOMO-76, Fix focus issue on sina weibo log in page\nOMO-82, Fix issue of word account element is shown in incorrect place of sina weibo post view\nOMO-86, Fix word account element display issue of sina weibo\nOMO-83, Fix display issue of  \'cleanup button\'  in sina weibo\nOMO-129, Fix URL encoding issue of sina weibo\nOMO-84, Fix  buttons of post view display issue in weibo.cn');
	} else if(hostname.indexOf('m.yelp.com')>-1){
		addCssToDocument('#search-bar .logo{float:left;height:100%;margin-right:5px;}#search-form .fake-input{width:70% !important;}#search-form .input-holder{width:70%;} #search-bar>.masthead{min-height: 100px} .action-bar li{width:49%!important}');
		document.addEventListener('DOMContentLoaded', function(){
			if(document.getElementById('search-bar'))
				addCssToDocument('.page-content{margin-top: '+(document.getElementById('search-bar').offsetHeight/1.79)+'px} ');
		}, false);
		log('PATCH-747, Work around flexbox-based styling on Yelp mobile site');
	} else if(hostname.indexOf('m.yihaodian.com')>-1){
		if(location.href.indexOf('m.yihaodian.com/mw/?')>-1){
		  location.href = "http://m.yihaodian.com/?websiteflag=true";
		}
		log('NHSP-664, Page display issue of yihaodian.com');
	} else if(hostname.indexOf('m.zdnet.com')!=-1){
		forceMobileView();
		log('TWEETY-110, Mobile zdnet.com should be displayed in mobile view');
	} else if(hostname.indexOf('mbga.jp')>-1){
		var cssText = '';
		cssText += '.bt_m.sp-orange, .bt_l.sp-orange, .sp-bt_m.sp-orange2, input[type="submit"].sp-bt_m.sp-orange2, input[type="button"].sp-bt_m.sp-orange2, .sp-bt_l.sp-orange2, input[type="submit"].sp-bt_l.sp-orange2, input[type="button"].sp-bt_l.sp-orange2 {background:-o-linear-gradient(top,#F90,#F60);}';
		cssText += '.topHeaderLoginBtn a,div.dlpo4-ph1 a.btn,.moreLink2 div{background:-o-linear-gradient(top,#CCC,#888);}';
		cssText += 'button,input[type="submit"] {background-color:#AAA;}';
		cssText += '.regTitle, .migMTitle, .logTitle, .logFBTitle {text-indent:-9999px;}';
		cssText += '.top_g_login_unit .regTitle {text-indent:0px;}';
		cssText += 'div.sp-scrollbanner_div img {transform:scale(0.7);transform-origin:bottom center;}';
		addCssToDocument(cssText);
		log('PATCH-1054, mbga.jp - adding missing gradients');
	} else if(hostname.indexOf('mk.co.kr') > -1){
		document.all = undefined;
		log('364762, mk.co.kr requests a lot of additional javascript after checking document.all - customer requested fix for load time');
	} else if(hostname.indexOf('mobile.handango.com')!=-1){
		forceMobileView();
		log('TWEETY-44, mobile.handango.com pages are displayed in overview mode, since they are declared without doctype.');
	} else if(hostname.indexOf('mobile.orange.ch')!=-1){
		addCssToDocument('table{float:none; !important}');
		log('357472, Fix for table align making tables behave as inline on mobile.orange.ch');
	} else if(hostname.indexOf('mobile.youporn.com')!=-1){
		forceMobileView();
		log('TWEETY-109, Mobile youporn.com uses generic doctype');
	} else if(hostname.indexOf('moneta.co.kr')!=-1){
		window.opera.addEventListener('BeforeScript', function(e) {
		e.element.text = e.element.text.replace(
				  /function goto\(/g,
				  'function moneta_co_kr_goto('
				);
		}, false);
		
		window.opera.addEventListener(
			    'BeforeJavascriptURL',
			    function (e) {
			      if( e.source.indexOf('goto') != -1 ) {
				
				e.source = e.source.replace(
				  /goto\(/g,
				  'moneta_co_kr_goto('
				);
			      }
			    },
			    false
			  );
		
	
		opera.addEventListener('BeforeExternalScript', function(e){
		preventDefault.call=indexOf.call=call; if(e.element.src && indexOf.call(e.element.src, 'ad.moneta.co.kr')!=-1){preventDefault.call(e);}}, false);
	
		opera.defineMagicFunction('searchCheck', function() { document.getElementsByName('kwd')[0].style.background = 'none';});
		log('SEOUL-618, Renames method on moneta.co.kr (was named goto), also hides flash advertisements that cover content\nSEOUL-466, Gets rid of flash that is mispositioned on moneta.co.kr\nOTW-4374, Hides background image in search bar on moneta.co.kr');
	} else if(hostname.indexOf('myapp.com')>-1){
		addCssToDocument('header.main > nav ul li { display:inline-block; margin-right: 2px; padding: 0px 6px;}');
		log('NHSP-424, Navigation part display issue of myapp.com');
	} else if(hostname.indexOf('myspace.com')>-1){
		HTMLInputElement.prototype.__defineSetter__('type',function(v){
			if (this.type!==v) {
				var doFocus = (this == document.activeElement);
				this.setAttribute('type',v);
				if (doFocus) this.focus();
				return v;
			}
		});
		log('EMO-4049, Enable log in to myspace');
	} else if(hostname.indexOf('netian.com')>-1){
		addCssToDocument('#closer { position: relative !important }');
		addCssToDocument('#hd { position: relative !important }');
		log('354018, Moves the absolutely positioned SMS div on netian.com (after logging in)');
	} else if(hostname.indexOf('netpia.linkprice.com')>-1){
		addEventListener.call(document, 'load', function(){try{clear()}catch(e){}}, false);
		log('354340, Clears popups that are visible after loading subpages on netpia.linkprice.com');
	} else if(hostname.indexOf('news.biglobe.ne.jp')>-1){
		var cssText = '';
		cssText +='.navi2,.dsp,.keywordsttl01block,#keywordsblock .keywords a,#searchsubmit {background:-o-linear-gradient(top,#FFF,#EEE);}';
		cssText +='#areasearch {background:-o-linear-gradient(top,#ABC,#68B);}';
		addCssToDocument(cssText);
		log('PATCH-1005, news.biglobe.ne.jp - add missing gradients');
	} else if(hostname.indexOf('news.cn')>-1){
		if(hostname.indexOf('3g.') > -1 || hostname.indexOf('m.') > -1){
		  addCssToDocument('.button, .button1{background:-o-linear-gradient(to bottom, #A9CA39, #689D00);} .categories ul li.blnone{clear:left;}');
		}
		log('NHSP-564, Button display issue of news.cn');
	} else if(hostname.indexOf('nocoty.pl')>-1){
		var cssText = '';
		cssText += '.bar, .box .bar, .barList, .box .barList {background: -o-linear-gradient(top, #E30A7F, #FAC);}';
		cssText += '.more, div.lnk, .exch table tr td, .tvNavBar, div.clr {background: -o-linear-gradient(top, #FFF, #C0C0C0);}';
		addCssToDocument(cssText);
		log('PATCH-868, nocoty.pl - add missing gradients');
	} else if(hostname.indexOf('o2active')!=-1){
		addCssToDocument('body{width:100%!important; max-width:'+screen.width+'px;}');
		log('266967, o2active.de, making sure narrow centered column does not appear off-screen');
	} else if(hostname.indexOf('ocn.ne.jp')>-1){
		var cssText = '';
		cssText += '#searchField > input {background-color: #FFF; width:78%; height:27px;}';
		cssText += '#newsContents ul#gooNewsTabs li.ui-tabs-selected a {background-image: -o-linear-gradient(top,#AAA,#000);}';
		cssText += '#ocncontent h2, #ocncatalog h2,#service h2, #notice h2 {background-image:-o-linear-gradient(top,#444,#000);}';
		addCssToDocument(cssText);
		log('PATCH-1062, ocn.ne.jp - add missing gradients and search field');
	} else if(hostname.indexOf('officeapps.live.com')>-1){
		/* Microsoft Office Web Apps */
		log('0, Microsoft Office Web Apps');
	} else if(hostname.indexOf('opera.com')>-1&& pathname.indexOf('/docs/browserjs/')==0){
		document.addEventListener((parseFloat(opera.version())>9?'DOMContentLoaded':'load'),function(){
			if(document.getElementById('browserjs_active')){
				document.getElementById('browserjs_active').style.display='';
				document.getElementById('browserjs_active').getElementsByTagName('span')[0].appendChild(document.createTextNode(bjsversion));
				document.getElementById('browserjs_status_message').style.display='none';
			}else if(document.getElementById('browserjs_status_message')){
				document.getElementById('browserjs_status_message').firstChild.data='Browser.js is enabled! '+bjsversion;
			}
		}, false);
		log('0, Browser.js status and version reported on browser.js documentation page');
	} else if(hostname.indexOf('ota.getvzappzone.com')!=-1){
		forceMobileView();
		log('TWEETY-192, Verizon Wireless mobile app zone site should default to mobile view');
	} else if(hostname.indexOf('pb.yamada-denki.jp')>-1){
		Element.prototype.attachEvent = null;
		window.opera = null;
		document.addEventListener('DOMContentLoaded',function(e){
			document.addEventListener('mousewheel',onMouseWheel,true);
		},false);
		
		log('PATCH-202, Show digital pamphlet from Yamada Denki');
	} else if(hostname.indexOf('phim88.com')>-1){
		// phim88.com code uses LTAS object
		opera.defineMagicVariable('LTAS', function(obj){
			var origOverlayCloseandPlay=obj.OverlayCloseandPlay;
			obj.OverlayCloseandPlay=function(playerid){
				document.getElementById(playerid).style.visibility='visible';
				return origOverlayCloseandPlay.apply(this, arguments);
			}
			var origShowAd=obj.ShowAd;
			obj.ShowAd=function(playerid, ad){
				document.getElementById(playerid).style.visibility='hidden';
				return origShowAd.apply(this, arguments);
			};
			return obj;
		}, null);
		log('SOKRI4-1002, "Close overlay ad before playing film" does not work with a window-level plugin implementation');
	} else if(hostname.indexOf('photobucket.com')>-1){
		addCssToDocument(" div.featuredPromo h1, div.featuredPromo h3 { white-space:nowrap !important; }"); 
		log('YUSHAN-293, Fix overlapped header text for photobucket.com');
	} else if(hostname.indexOf('qiushibaike.com')>-1){
		addCssToDocument('.app{position : relative !important;} .app a {position:absolute !important;}');
		
		if(pathname.indexOf('/users/') > -1){
		 addCssToDocument('@-o-viewport {width:device-width; zoom:1; min-zoom:1; max-zoom:2; user-zoom:zoom;} @viewport {width:device-width; zoom:1; min-zoom:1; max-zoom:2; user-zoom:zoom;}');
		}
		log('NHSP-477, App ads position issue of qiushibaike.com');
	} else if(hostname.indexOf('rikunabi.com')>-1){
		var cssText = '';
		/* top page */
		cssText += '#main h2.title_blue {background: -o-linear-gradient(top , #417EC5 25%, #0B51A2);}';
		cssText += '#main h2.title_red  {background: -o-linear-gradient(top , #F04848 25%, #FF0101);}';
		cssText += '#main h2.title_orange {background: -o-linear-gradient(top , #FF9935 25%, #FF5A01);}';
		cssText += '#main h2.title_gray {background: -o-linear-gradient(top , #999 25%, #333);}';
		/* second pages */
		cssText += '#mainContents h2, h2.h2Link, input[class="tdaction"], #smp_loginArea .smp_btn_login {background-image: -o-linear-gradient(top, #A2C6F3, #448CE6);}';
		addCssToDocument(cssText);
		log('PATCH-956, rikunabi.com - add missing gradient');
	} else if(hostname.indexOf('rr.com') != -1 || hostname.indexOf('roadrunner.com') != -1){
		addCssToDocument("a.btnXLRed span, .header .content .menu li a{text-shadow:none !important;}");
		log('PIONER-353, Text-shadow not properly specified on rr.com');
	} else if(hostname.indexOf('samsungmobileusa.com')>-1){
		addPreprocessHandler(/9\.0\.115\.0/, '9.1.125.0' );
		log('PIONER-271, Samsung USA flash detection fix');
	} else if(hostname.indexOf('sayclub.com')>-1){
		document.addEventListener('DOMFocusIn', function(e){if(e.target.tagName=='INPUT'){
			e.target.style.backgroundImage = 'none';
			e.target.addEventListener('keypress', function(){ this.style.backgroundImage='none'; },false);
		}},true);
		
		log('363232, hides id and password background images that are text input backgrounds');
	} else if(hostname.indexOf('sina.cn')>-1){
		addCssToDocument('body, #mainpage, .headbox .mate, .nav_content_list, .nav_content_list .nav_content_item, .wrap, header,nav,section,footer { min-width: 320px; width: auto !important;  } .nav_content_list .nav_content_item { display: block !important; float: none !important;} .wrapper .scroller ul.slide_img_list { width: auto !important;} .tit { clear: both; } .headnav { white-space: nowrap; } ');
		
		if(hostname.indexOf('down.')>-1) {
			addCssToDocument('.search .s1 input.common-btn, .search .s2 input { color: #333 !important; } '); 
		}
		
		function nolazy() {
				var g = document.querySelectorAll('ul.wb_Recommend');
				if(g) {
					for(var i=0; i< g.length; i++) {
						if(g[i].getAttribute('data-role') == 'lazy') {
							g[i].removeAttribute('data-role');
						}
					}
				}
				var g3 = document.querySelectorAll('img');
				if(g3) {
					for(var i=0; i< g3.length; i++) {
						if(g3[i].getAttribute('data-src')) {
							g3[i].setAttribute('src', g3[i].getAttribute('data-src'));
						}
				
						if(g3[i].getAttribute('original')) {
							g3[i].setAttribute('src', g3[i].getAttribute('original'));
						}
					}
				}
		}
		document.addEventListener("DOMContentLoaded", nolazy,false);
		log('NHSP-452, Fix layout issue and images display issue of new designed sina.cn');
	} else if(hostname.indexOf('sinaapp.com') > -1){
		if (hostname.indexOf('iavadraw') > -1 && pathname.indexOf('draw') >-1) {
		 addCssToDocument('.gamelistb2in { width: 96px !important; }'); 
		}
		log('NHSP-425, Draw game contents missing issue of sinaapp.com');
	} else if(hostname.indexOf('siren24.com')!=-1){
		navigator.appName = 'Netscape';
		log('SEOUL-609, ActiveX installation page redirect on siren24.com due to sniffing limitation on redirect script');
	} else if(hostname.indexOf('smithbarney.com')>-1){
		HTMLInputElement.prototype.__defineSetter__('type',function(){
			if (this.getAttribute('type')!=arguments[0]) {
				var doFocus=false, result;
				if (this == document.activeElement) doFocus = true;
				result = this.setAttribute('type',arguments[0]);
				if (doFocus) this.focus();
				return result;
			}
		});
		
		log('PATCH-360, Enable the password box on smithbarney.com');
	} else if(hostname.indexOf('sp.mainichi.jp')>-1){
		var cssText = '';
		/* Top Menu */
		cssText += '#m .nav-header ul {background-color: #0098D3;}';
		cssText += '#m .nav-header ul {background-image: -o-linear-gradient(top, #1ABDEC, #1AB6E6 35%, #00ABE1 36%, #0098D3);}';
		cssText += '#m .nav-header ul {background-image: linear-gradient(to bottom, #1ABDEC, #1AB6E6 35%, #00ABE1 36%, #0098D3);}';
		/* Buttons */
		cssText += 'section.sponichi li:last-child {background-color: #EDEDED;}';
		cssText += 'section.sponichi li:last-child {background-image: -o-linear-gradient(top, white, #EDEDED 40%, #C9C9C9);}';
		cssText += 'section.sponichi li:last-child {background-image: linear-gradient(to bottom, white, #EDEDED 40%, #C9C9C9);}';
		cssText +='.global-footer .btn_back a {background-color: #EDEDED;}';
		cssText +='.global-footer .btn_back a {background-image: -o-linear-gradient(top, #FCFCFC, #EDEDED 30%, #C9C9C9);}';
		cssText +='.global-footer .btn_back a {background-image: linear-gradient(to bottom, #FCFCFC, #EDEDED 30%, #C9C9C9);}';
		addCssToDocument(cssText);
		log('PATCH-840, sp.mainichi.jp - add missing gradients');
	} else if(hostname.indexOf('sperrysoftware.com')!=-1){
		addCssToDocument('td{vertical-align:top}');
		log('309189, Nested tables with 100% height are not laid out as expected, menu is pushed down');
	} else if(hostname.indexOf('sports.donga.com')>-1){
		addCssToDocument('#FloatLayer1{visibility:hidden!important}');
		log('354059, Blocks floating flash ad on sports.donga.com that cannot be closed');
	} else if(hostname.indexOf('star.moneytoday.co.kr')>-1){
		try {
		    addEventListener.call(document, 'DOMContentLoaded', function(){
		        var elm=document.getElementById('realtimenews');
		        if(elm){
		            elm.childNodes[1].childNodes[1].childNodes[0].click();
		        }
		    }, false);
		} catch(e) {}
		log('348222, Clicks on a link to display the front page story in an iframe on star.moneytoday.co.kr');
	} else if(hostname.indexOf('t.yuuquu.com')>-1){
		if(pathname.toLowerCase().indexOf('tologin')>-1){
		document.addEventListener('DOMContentLoaded', function(){
					var ipt = document.getElementsByTagName("input");
					for(var i=0; i< ipt.length; i++) {
						if(ipt[i].getAttribute('type')=='tel' || ipt[i].getAttribute('type')=='password'){
							 ipt[i].setAttribute('onfocus','');
						}	
					}			
				}, false);	
		}
		log('OMO-104, Fix log in issue of t.yuuquu.com');
	} else if(hostname.indexOf('taobao.com')>-1){
		if(hostname.indexOf('m.')>-1 || hostname.indexOf('wap.')>-1 || hostname.indexOf('3g.')>-1) {
		  addCssToDocument('@-o-viewport {width:device-width; zoom:1; min-zoom:1; max-zoom:2; user-zoom:zoom;} @viewport {width:device-width; zoom:1; min-zoom:1; max-zoom:2; user-zoom:zoom;}');
		}
	
		if(hostname.indexOf('m.')>-1 || hostname.indexOf('wap.')>-1 || hostname.indexOf('3g.')>-1) {
			if(location.search.indexOf('v=1')<=-1 && (pathname.length <2 && (location.search.length <2 || location.search.indexOf('sprefer=sypc00')>-1))) {
				location.replace('http://m.taobao.com/?v=1');
			} 
			else if(location.search.indexOf('v=0')>-1 && pathname.length <2) {
				var obaoUrl = href;
				obaoUrl = obaoUrl.replace('v=0','v=1');
				location.replace(obaoUrl);
			} 
			if(location.search.indexOf('v=1')>-1) {
				addCssToDocument('.vision, .website-nav a font[color=gray] {display: none;}'); 
			}
		
		}
	
		if(hostname.indexOf('m.')>-1 || hostname.indexOf('wap.')>-1 ) {
			if(pathname.indexOf('login')>-1 && hostname.indexOf('login')>-1)
			{
				addCssToDocument('.login .login-form li {height:auto !important;} .common-btn-full {background: -o-linear-gradient(#F94920,#EB3E13) !important;}');
			}
		}
		log('NHSP-663, Viewport issue of m.taobao.com\nNHSP-435, Fix layout messing up issue of m.taobao.com touch screen version\nOMO-267, Fix input box and layout display issue of login.m.taobao.com');
	} else if(hostname.indexOf('time.com')>-1){
		navigator.userAgent=navigator.userAgent.replace( /windows ce/i, '' );
		log('229826, time.com script causes reload loop if UA contains "Windows CE"');
	} else if(hostname.indexOf('tistory.com')!=-1){
		addCssToDocument('#memberbox .btn-login {text-indent:-100px;}');
		log('347990, two login buttons on tistory.com');
	} else if(hostname.indexOf('tmall.com')>-1){
		if(hostname.contains('m.')){
		 addCssToDocument('@-o-viewport {width:device-width; zoom:1; min-zoom:1; max-zoom:2; user-zoom:zoom;} '+
				'@viewport {width:device-width; zoom:1; min-zoom:1; max-zoom:2; user-zoom:zoom;}');
		}
		log('NHSP-671, Viewport issue of tmall.com');
	} else if(hostname.indexOf('touch.pixiv.net')>-1){
		addCssToDocument('.icon-search::before {-o-transform: scale(0.5);-o-transform-origin: -18% -16%;}'); 
		log('PATCH-1003, touch.pixiv.net - css zoom fix');
	} else if(hostname.indexOf('travel.rakuten.co.jp')>-1){
		var cssText = '.headLink{background: -o-linear-gradient(top, #666666, #000000 45%);}';
		cssText += '#searchArea #map{background: -o-linear-gradient(top, #FFFFFF, #9CE2EB);}';
		cssText += 'p.btPersonal{background: -o-linear-gradient(top, #9BBD3C, #66B821 50%, #66B821);}';
		cssText += '.headLink p.btTop{background: -o-linear-gradient(top, #84AAED, #2B78E4 50%, #2B78E4);}' ;
		cssText += '#searchArea #search input.submit{background: -o-linear-gradient(top, #F6731C, #E15A00 45%);}' ;
		addCssToDocument(cssText);
		log('PATCH-773, travel.rakuten.co.jp - add missing gradients');
	} else if(hostname.indexOf('twitter.com')>-1){
		if(pathname.length<2){
		 addCssToDocument("#home_search p { white-space:nowrap !important;  }");
		}
		log('YUSHAN-294, Fix search button and search box overlap issue for twitter.com');
	} else if(hostname.indexOf('u-can.co.jp')>-1){
		var cssText = '';
		cssText += 'img {transform: scale(0.5); transform-origin:top left;}';
		cssText += '.banner {height: 106px;}';
		cssText += '#apply li a span {background: -o-linear-gradient(bottom, #F9B81F 4%, #FBA019 50%, #FCBB59 51%, #FAA55A); box-sizing: border-box;}';
		cssText += '#apply2 a span.btn {background-image: -o-linear-gradient(bottom, #FFFEAA 4%, #F6F064 50%, #FBFAAF 51%, #FEFC95); box-sizing: border-box;}';
		cssText += 'article h1 {background: -o-linear-gradient(bottom, #F7F4EB, #F7F4EB 50%, #FAF8F3 51%, #FBFAF8 100%);}';
		cssText +='#related .relMenu li {transform: scale(0.8); transform-origin:top center; background: -o-linear-gradient(left, #F3F8E7, #E3EFC5 4%, #CDE298 50%, #C2DC81 95%, #8EA856);}';
		addCssToDocument(cssText);
		log('PATCH-952, u-can.co.jp - add missing gradient and fix for css zoom');
	} else if(hostname.indexOf('veoh.com')>-1){
		var cssText = '.iBClassic {background-image: -o-linear-gradient(top,#666,#000);}';
		cssText += '.iBClassic_select {background-image: -o-linear-gradient(#111,#111);}';
		addCssToDocument(cssText);
		log('PATCH-979, veoh.com - replace border image by gradients');
	} else if(hostname.indexOf('viacom.com')!=-1){
		opera.defineMagicVariable('plugin', function(curVal) { return true; }, null);
		log('SEOUL-616, Tweaked SWFObject on viacom.com creates constant document reflows');
	} else if(hostname.indexOf('wap.flycell.com.br')!=-1){
		addCssToDocument('input[type=hidden], input[type=submit]{-wap-input-format: "*m" !important;}');
		log('SOKRI3-1432, Avoid CSS input validation of hidden inputs');
	} else if(hostname.indexOf('wap.playboy.com')==0){
		addCssToDocument( 'img{max-width: '+(screen.width)+'px; }' );
		document.addEventListener('DOMContentLoaded', function(){
			var largeImgs=document.selectNodes('//img[@width>'+window.innerWidth+']');
			for(var i=0,img;img=largeImgs[i];i++){
				var scalingFactor = window.innerWidth/(img.width+15);//add 15 px for scroll bar and such
				img.style.width=(img.width*scalingFactor)+'px';
				img.style.height=(img.height*scalingFactor)+'px';
			}
		}, false);
		
		log('SOKRI4-1550, Resize home banner and other wide images');
	} else if(hostname.indexOf('wap.sina.com')>-1){
		addCssToDocument("body {line-height: 1.5em;}");
		log('YUSHAN-2339, Fix line-height issue of wap.sina.com.cn');
	} else if(hostname.indexOf('wap.smartone-vodafone.com')>-1){
		opera.setOverrideHistoryNavigationMode('compatible');
		log('SOKRI3-1645, Re-initialize page on back to make plugins work correctly');
	} else if(hostname.indexOf('wap.vnet.mobi')>-1){
		if( document.documentElement ){ 
		 var meta=document.documentElement.appendChild(document.createElement('meta')); 
		 meta.setAttribute('name', "viewport"); 
		 meta.setAttribute('content', "width=340,user-scalable=no");
		}
		log('HMONY-1927, Remove overlapping text on vnet.mobi');
	} else if(hostname.indexOf('wapp.verizon.net')!=-1){
		forceMobileView();
		log('OSAN-11, Verizon mobile webmail service should default to mobile view');
	} else if(hostname.indexOf('webprint.post.japanpost.jp')>-1){
		opera.defineMagicFunction('_supportsDOM',function (oReal,oThis) { return true; });
		log('PATCH-449, japanpost.jp: Fix broken _supportsDOM function');
	} else if(hostname.indexOf('westjet.com')>-1 ){
		opera.defineMagicVariable('browser', function(o){ o.isSupported=true; return o; }, null);
		log('PATCH-260,  Westjet browser sniffing warns against Opera');
	} else if(hostname.indexOf('wp.pl')>-1){
		var cssText = '';
		/* Page Top */
		cssText += 'div.topLogo {background: -o-linear-gradient(top, #C6C7C9, #FFF);}';
		cssText += 'div.topLogo {background: linear-gradient(to bottom, #C6C7C9, #FFF);}';
		/* Page bottom menu */
		cssText += '.menu {background: -o-linear-gradient(top, #D6D6D6, #F0F0F0);}';
		cssText += '.menu {background: linear-gradient(to bottom, #D6D6D6, #F0F0F0);}';
		addCssToDocument(cssText);
		log('PATCH-864, wp.pl - add missing gradients');
	} else if(hostname.indexOf('www.answers.com')>-1){
		addCssToDocument('body{background-image: -o-linear-gradient(top,rgba(74,114,193,0.98),rgba(31,56,105,0.98)), url(http://en.site2.answcdn.com/templates/images/stripe.png?v=49d225d);}');
		log('PATCH-719, answers.com: add background gradient');
	} else if(hostname.indexOf('www.biglobe.ne.jp')>-1){
		var cssText ='';
		cssText +='ul.stabs li a.s_active {background:-o-linear-gradient(top,#04B,#49F);}';
		cssText +='ul.stabs {background:-o-linear-gradient(top,#FFF,#CCC);}';
		cssText +='div.search input.sfrm {width:98%;}';
		cssText +='.title,a.topicsTtlBar {background:-o-linear-gradient(top,#06D,#5AF);}';
		addCssToDocument(cssText);
		log('PATCH-1004, www.biglobe.ne.jp - add missing gradients');
	} else if(hostname=='live.vodafone.com'&&pathname.indexOf('/jumppage')==0){
		forceMobileView();
		log('362160, Display Vodafone\'s Google search site in Normal Zoom by default');
	} else if(hostname=='m.espn.go.com'){
		scaleImagesToScreenWidth();
		forceWordWrapping();
		log('OSAN2-282, Content goes over screen width on m.espn.go.com');
	} else if(hostname=='mobile.vzwapp.com' || hostname=='mobile.vzw.com' || hostname=='start.vzw.com'){
		if(location.pathname=='/')addCssToDocument('span{background: none !important;}');
	
		forceMobileView();
		log('OSAN-227, VZW mobile start page has colored span elements that overlap images\n356069, VZW mobile portal does not trigger mobile view');
	} else if(hostname=='wap.smart.com.ph'){
		document.addEventListener('DOMContentLoaded',function (){
			if(!document.body && document.documentElement.nodeName == 'html' && document.documentElement.namespaceURI == null){
				document.replaceChild(	(new DOMParser()).parseFromString(((new XMLSerializer()).serializeToString(document)).replace(/<html/,'<html xmlns="http://www.w3.org/1999/xhtml"'),'application/xml').documentElement, document.documentElement);
			}
		}, false );
		
	
		document.addEventListener('DOMContentLoaded', function(e){
			if(document.links[0].href=='opera:forcehtml'){ document.links[0].click(); }
		}, false);
		log('327422,  WAP site on smart.com.ph serves XHTML content without xmlns\n331879, Automatically re-parse XHTML content with parse errors as HTML');
	} else if(hostname=='weather-mobile.weatherbug.com'){
		scaleImagesToScreenWidth(); 
		log('OSAN2-283, Banner goes over screen width on weather-mobile.weatherbug.com');
	} else if(hostname=='xhtml.emome.net'){
		forceMobileView();
		log('328103, emome.net wap portal does not trigger mobile view');
	} else if(href == 'http://www.dowwallpaper.com/index.htm'){
		window.location.replace("home.php");
		log('UMAFINAL-1521, redirect to frame content to prevent rendering error for small buffer size');
	} else if(location.protocol == 'data:'){
		location.reload = function(){}
		HTMLIFrameElement.prototype.__defineGetter__('contentWindow', function(){return window;});
		HTMLIFrameElement.prototype.__defineGetter__('contentDocument', function(){return document;});
		
		log('PATCH-1035, Work around Universal XSS bug for older Opera versions');
	}

})(opera);
